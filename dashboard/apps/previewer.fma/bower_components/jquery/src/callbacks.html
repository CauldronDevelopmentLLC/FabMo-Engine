<!DOCTYPE html><html lang="en"><head><title>dashboard/apps/previewer.fma/bower_components/jquery/src/callbacks</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../../"><meta name="groc-document-path" content="dashboard/apps/previewer.fma/bower_components/jquery/src/callbacks"><meta name="groc-project-path" content="dashboard/apps/previewer.fma/bower_components/jquery/src/callbacks.js"><link rel="stylesheet" type="text/css" media="all" href="../../../../../../assets/style.css"><script type="text/javascript" src="../../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">dashboard/apps/previewer.fma/bower_components/jquery/src/callbacks.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">define([
	<span class="hljs-string">"./core"</span>,
	<span class="hljs-string">"./var/rnotwhite"</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> jQuery, rnotwhite </span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>String to Object options format cache</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">var</span> optionsCache = {};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Convert String-formatted options into Object-formatted ones and store in cache</p></div></div><div class="code"><div class="wrapper"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createOptions</span>(<span class="hljs-params"> options </span>) </span>{
	<span class="hljs-keyword">var</span> object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> _, flag </span>) </span>{
		object[ flag ] = <span class="hljs-literal">true</span>;
	});
	<span class="hljs-keyword">return</span> object;
}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Create a callback list using the following parameters:</p>
<p>options: an optional list of space-separated options that will change how
        the callback list behaves or a more traditional option object</p>
<p>By default a callback list will act like an event callback list and can be
&quot;fired&quot; multiple times.</p>
<p>Possible options:</p>
<p>once:            will ensure the callback list can only be fired once (like a Deferred)</p>
<p>memory:            will keep track of previous values and will call any callback added
                after the list has been fired right away with the latest &quot;memorized&quot;
                values (like a Deferred)</p>
<p>unique:            will ensure a callback can only be added once (no duplicate in the list)</p>
<p>stopOnFalse:    interrupt callings when a callback returns false</p></div></div><div class="code"><div class="wrapper">jQuery.Callbacks = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> options </span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Convert options from String-formatted to Object-formatted if needed
(we check in cache first)</p></div></div><div class="code"><div class="wrapper">	options = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"string"</span> ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	<span class="hljs-keyword">var</span> <span class="hljs-comment">// Last fire value (for non-forgettable lists)</span>
		memory,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Flag to know if list was already fired</p></div></div><div class="code"><div class="wrapper">		fired,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Flag to know if list is currently firing</p></div></div><div class="code"><div class="wrapper">		firing,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>First callback to fire (used internally by add and fireWith)</p></div></div><div class="code"><div class="wrapper">		firingStart,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>End of the loop when firing</p></div></div><div class="code"><div class="wrapper">		firingLength,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Index of currently firing callback (modified by remove if needed)</p></div></div><div class="code"><div class="wrapper">		firingIndex,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Actual callback list</p></div></div><div class="code"><div class="wrapper">		list = [],</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Stack of fire calls for repeatable lists</p></div></div><div class="code"><div class="wrapper">		stack = !options.once &amp;&amp; [],</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Fire callbacks</p></div></div><div class="code"><div class="wrapper">		fire = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> data </span>) </span>{
			memory = options.memory &amp;&amp; data;
			fired = <span class="hljs-literal">true</span>;
			firingIndex = firingStart || <span class="hljs-number">0</span>;
			firingStart = <span class="hljs-number">0</span>;
			firingLength = list.length;
			firing = <span class="hljs-literal">true</span>;
			<span class="hljs-keyword">for</span> ( ; list &amp;&amp; firingIndex &lt; firingLength; firingIndex++ ) {
				<span class="hljs-keyword">if</span> ( list[ firingIndex ].apply( data[ <span class="hljs-number">0</span> ], data[ <span class="hljs-number">1</span> ] ) === <span class="hljs-literal">false</span> &amp;&amp; options.stopOnFalse ) {
					memory = <span class="hljs-literal">false</span>; <span class="hljs-comment">// To prevent further calls using add</span>
					<span class="hljs-keyword">break</span>;
				}
			}
			firing = <span class="hljs-literal">false</span>;
			<span class="hljs-keyword">if</span> ( list ) {
				<span class="hljs-keyword">if</span> ( stack ) {
					<span class="hljs-keyword">if</span> ( stack.length ) {
						fire( stack.shift() );
					}
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( memory ) {
					list = [];
				} <span class="hljs-keyword">else</span> {
					self.disable();
				}
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Actual Callbacks object</p></div></div><div class="code"><div class="wrapper">		self = {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Add a callback or a collection of callbacks to the list</p></div></div><div class="code"><div class="wrapper">			add: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( list ) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>First, we save the current length</p></div></div><div class="code"><div class="wrapper">					<span class="hljs-keyword">var</span> start = list.length;
					(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"> args </span>) </span>{
						jQuery.each( args, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> _, arg </span>) </span>{
							<span class="hljs-keyword">var</span> type = jQuery.type( arg );
							<span class="hljs-keyword">if</span> ( type === <span class="hljs-string">"function"</span> ) {
								<span class="hljs-keyword">if</span> ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( arg &amp;&amp; arg.length &amp;&amp; type !== <span class="hljs-string">"string"</span> ) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Inspect recursively</p></div></div><div class="code"><div class="wrapper">								add( arg );
							}
						});
					})( <span class="hljs-built_in">arguments</span> );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Do we need to add the callbacks to the
current firing batch?</p></div></div><div class="code"><div class="wrapper">					<span class="hljs-keyword">if</span> ( firing ) {
						firingLength = list.length;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>With memory, if we&#39;re not firing then
we should call right away</p></div></div><div class="code"><div class="wrapper">					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Remove a callback from the list</p></div></div><div class="code"><div class="wrapper">			remove: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( list ) {
					jQuery.each( <span class="hljs-built_in">arguments</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> _, arg </span>) </span>{
						<span class="hljs-keyword">var</span> index;
						<span class="hljs-keyword">while</span> ( ( index = jQuery.inArray( arg, list, index ) ) &gt; -<span class="hljs-number">1</span> ) {
							list.splice( index, <span class="hljs-number">1</span> );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Handle firing indexes</p></div></div><div class="code"><div class="wrapper">							<span class="hljs-keyword">if</span> ( firing ) {
								<span class="hljs-keyword">if</span> ( index &lt;= firingLength ) {
									firingLength--;
								}
								<span class="hljs-keyword">if</span> ( index &lt;= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Check if a given callback is in the list.
If no argument is given, return whether or not list has callbacks attached.</p></div></div><div class="code"><div class="wrapper">			has: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> fn </span>) </span>{
				<span class="hljs-keyword">return</span> fn ? jQuery.inArray( fn, list ) &gt; -<span class="hljs-number">1</span> : !!( list &amp;&amp; list.length );
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Remove all callbacks from the list</p></div></div><div class="code"><div class="wrapper">			empty: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				list = [];
				firingLength = <span class="hljs-number">0</span>;
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Have the list do nothing anymore</p></div></div><div class="code"><div class="wrapper">			disable: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				list = stack = memory = <span class="hljs-literal">undefined</span>;
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Is it disabled?</p></div></div><div class="code"><div class="wrapper">			disabled: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">return</span> !list;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Lock the list in its current state</p></div></div><div class="code"><div class="wrapper">			lock: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				stack = <span class="hljs-literal">undefined</span>;
				<span class="hljs-keyword">if</span> ( !memory ) {
					self.disable();
				}
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Is it locked?</p></div></div><div class="code"><div class="wrapper">			locked: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">return</span> !stack;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Call all callbacks with the given context and arguments</p></div></div><div class="code"><div class="wrapper">			fireWith: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> context, args </span>) </span>{
				<span class="hljs-keyword">if</span> ( list &amp;&amp; ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					<span class="hljs-keyword">if</span> ( firing ) {
						stack.push( args );
					} <span class="hljs-keyword">else</span> {
						fire( args );
					}
				}
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Call all the callbacks with the given arguments</p></div></div><div class="code"><div class="wrapper">			fire: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				self.fireWith( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>To know if the callbacks have already been called at least once</p></div></div><div class="code"><div class="wrapper">			fired: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">return</span> !!fired;
			}
		};

	<span class="hljs-keyword">return</span> self;
};

<span class="hljs-keyword">return</span> jQuery;
});</div></div></div></div></body></html>