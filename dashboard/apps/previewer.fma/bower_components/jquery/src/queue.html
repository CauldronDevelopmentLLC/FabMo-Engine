<!DOCTYPE html><html lang="en"><head><title>dashboard/apps/previewer.fma/bower_components/jquery/src/queue</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../../"><meta name="groc-document-path" content="dashboard/apps/previewer.fma/bower_components/jquery/src/queue"><meta name="groc-project-path" content="dashboard/apps/previewer.fma/bower_components/jquery/src/queue.js"><link rel="stylesheet" type="text/css" media="all" href="../../../../../../assets/style.css"><script type="text/javascript" src="../../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">dashboard/apps/previewer.fma/bower_components/jquery/src/queue.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">define([
	<span class="hljs-string">"./core"</span>,
	<span class="hljs-string">"./data/var/data_priv"</span>,
	<span class="hljs-string">"./deferred"</span>,
	<span class="hljs-string">"./callbacks"</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> jQuery, data_priv </span>) </span>{

jQuery.extend({
	queue: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, type, data </span>) </span>{
		<span class="hljs-keyword">var</span> queue;

		<span class="hljs-keyword">if</span> ( elem ) {
			type = ( type || <span class="hljs-string">"fx"</span> ) + <span class="hljs-string">"queue"</span>;
			queue = data_priv.get( elem, type );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Speed up dequeue by getting out quickly if this is just a lookup</p></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">if</span> ( data ) {
				<span class="hljs-keyword">if</span> ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} <span class="hljs-keyword">else</span> {
					queue.push( data );
				}
			}
			<span class="hljs-keyword">return</span> queue || [];
		}
	},

	dequeue: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, type </span>) </span>{
		type = type || <span class="hljs-string">"fx"</span>;

		<span class="hljs-keyword">var</span> queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				jQuery.dequeue( elem, type );
			};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>If the fx queue is dequeued, always remove the progress sentinel</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">if</span> ( fn === <span class="hljs-string">"inprogress"</span> ) {
			fn = queue.shift();
			startLength--;
		}

		<span class="hljs-keyword">if</span> ( fn ) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Add a progress sentinel to prevent the fx queue from being
automatically dequeued</p></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">if</span> ( type === <span class="hljs-string">"fx"</span> ) {
				queue.unshift( <span class="hljs-string">"inprogress"</span> );
			}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Clear up the last queue stop function</p></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">delete</span> hooks.stop;
			fn.call( elem, next, hooks );
		}

		<span class="hljs-keyword">if</span> ( !startLength &amp;&amp; hooks ) {
			hooks.empty.fire();
		}
	},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Not public - generate a queueHooks object, or return the current one</p></div></div><div class="code"><div class="wrapper">	_queueHooks: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, type </span>) </span>{
		<span class="hljs-keyword">var</span> key = type + <span class="hljs-string">"queueHooks"</span>;
		<span class="hljs-keyword">return</span> data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks(<span class="hljs-string">"once memory"</span>).add(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				data_priv.remove( elem, [ type + <span class="hljs-string">"queue"</span>, key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> type, data </span>) </span>{
		<span class="hljs-keyword">var</span> setter = <span class="hljs-number">2</span>;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> type !== <span class="hljs-string">"string"</span> ) {
			data = type;
			type = <span class="hljs-string">"fx"</span>;
			setter--;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length &lt; setter ) {
			<span class="hljs-keyword">return</span> jQuery.queue( <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>], type );
		}

		<span class="hljs-keyword">return</span> data === <span class="hljs-literal">undefined</span> ?
			<span class="hljs-keyword">this</span> :
			<span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> queue = jQuery.queue( <span class="hljs-keyword">this</span>, type, data );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Ensure a hooks for this queue</p></div></div><div class="code"><div class="wrapper">				jQuery._queueHooks( <span class="hljs-keyword">this</span>, type );

				<span class="hljs-keyword">if</span> ( type === <span class="hljs-string">"fx"</span> &amp;&amp; queue[<span class="hljs-number">0</span>] !== <span class="hljs-string">"inprogress"</span> ) {
					jQuery.dequeue( <span class="hljs-keyword">this</span>, type );
				}
			});
	},
	dequeue: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> type </span>) </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			jQuery.dequeue( <span class="hljs-keyword">this</span>, type );
		});
	},
	clearQueue: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> type </span>) </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.queue( type || <span class="hljs-string">"fx"</span>, [] );
	},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Get a promise resolved when queues of a certain type
are emptied (fx is the type by default)</p></div></div><div class="code"><div class="wrapper">	promise: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> type, obj </span>) </span>{
		<span class="hljs-keyword">var</span> tmp,
			count = <span class="hljs-number">1</span>,
			defer = jQuery.Deferred(),
			elements = <span class="hljs-keyword">this</span>,
			i = <span class="hljs-keyword">this</span>.length,
			resolve = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span> ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> type !== <span class="hljs-string">"string"</span> ) {
			obj = type;
			type = <span class="hljs-literal">undefined</span>;
		}
		type = type || <span class="hljs-string">"fx"</span>;

		<span class="hljs-keyword">while</span> ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + <span class="hljs-string">"queueHooks"</span> );
			<span class="hljs-keyword">if</span> ( tmp &amp;&amp; tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		<span class="hljs-keyword">return</span> defer.promise( obj );
	}
});

<span class="hljs-keyword">return</span> jQuery;
});</div></div></div></div></body></html>