<!DOCTYPE html><html lang="en"><head><title>dashboard/apps/previewer.fma/bower_components/jquery/src/data</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../../"><meta name="groc-document-path" content="dashboard/apps/previewer.fma/bower_components/jquery/src/data"><meta name="groc-project-path" content="dashboard/apps/previewer.fma/bower_components/jquery/src/data.js"><link rel="stylesheet" type="text/css" media="all" href="../../../../../../assets/style.css"><script type="text/javascript" src="../../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">dashboard/apps/previewer.fma/bower_components/jquery/src/data.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">define([
	<span class="hljs-string">"./core"</span>,
	<span class="hljs-string">"./var/rnotwhite"</span>,
	<span class="hljs-string">"./core/access"</span>,
	<span class="hljs-string">"./data/var/data_priv"</span>,
	<span class="hljs-string">"./data/var/data_user"</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> jQuery, rnotwhite, access, data_priv, data_user </span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Implementation Summary</p>
<ol>
<li>Enforce API surface and semantic compatibility with 1.9.x branch</li>
<li>Improve the module&#39;s maintainability by reducing the storage
 paths to a single mechanism.</li>
<li>Use the same single mechanism to support &quot;private&quot; and &quot;user&quot; data.</li>
<li><em>Never</em> expose &quot;private&quot; data to user code (TODO: Drop _data, _removeData)</li>
<li>Avoid exposing implementation details on user objects (eg. expando properties)</li>
<li>Provide a clear path for implementation upgrade to WeakMap in 2014</li>
</ol></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">var</span> rbrace = <span class="hljs-regexp">/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/</span>,
	rmultiDash = <span class="hljs-regexp">/([A-Z])/g</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dataAttr</span>(<span class="hljs-params"> elem, key, data </span>) </span>{
	<span class="hljs-keyword">var</span> name;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>If nothing was found internally, try to fetch any
data from the HTML5 data-* attribute</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">if</span> ( data === <span class="hljs-literal">undefined</span> &amp;&amp; elem.nodeType === <span class="hljs-number">1</span> ) {
		name = <span class="hljs-string">"data-"</span> + key.replace( rmultiDash, <span class="hljs-string">"-$1"</span> ).toLowerCase();
		data = elem.getAttribute( name );

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> data === <span class="hljs-string">"string"</span> ) {
			<span class="hljs-keyword">try</span> {
				data = data === <span class="hljs-string">"true"</span> ? <span class="hljs-literal">true</span> :
					data === <span class="hljs-string">"false"</span> ? <span class="hljs-literal">false</span> :
					data === <span class="hljs-string">"null"</span> ? <span class="hljs-literal">null</span> :</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Only convert to a number if it doesn&#39;t change the string</p></div></div><div class="code"><div class="wrapper">					+data + <span class="hljs-string">""</span> === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} <span class="hljs-keyword">catch</span>( e ) {}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Make sure we set the data so it isn&#39;t changed later</p></div></div><div class="code"><div class="wrapper">			data_user.set( elem, key, data );
		} <span class="hljs-keyword">else</span> {
			data = <span class="hljs-literal">undefined</span>;
		}
	}
	<span class="hljs-keyword">return</span> data;
}

jQuery.extend({
	hasData: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem </span>) </span>{
		<span class="hljs-keyword">return</span> data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, name, data </span>) </span>{
		<span class="hljs-keyword">return</span> data_user.access( elem, name, data );
	},

	removeData: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, name </span>) </span>{
		data_user.remove( elem, name );
	},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO: Now that all calls to _data and _removeData have been replaced
with direct calls to data_priv methods, these can be deprecated.</p></div></div><div class="code"><div class="wrapper">	_data: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, name, data </span>) </span>{
		<span class="hljs-keyword">return</span> data_priv.access( elem, name, data );
	},

	_removeData: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, name </span>) </span>{
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> key, value </span>) </span>{
		<span class="hljs-keyword">var</span> i, name, data,
			elem = <span class="hljs-keyword">this</span>[ <span class="hljs-number">0</span> ],
			attrs = elem &amp;&amp; elem.attributes;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Gets all values</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">if</span> ( key === <span class="hljs-literal">undefined</span> ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.length ) {
				data = data_user.get( elem );

				<span class="hljs-keyword">if</span> ( elem.nodeType === <span class="hljs-number">1</span> &amp;&amp; !data_priv.get( elem, <span class="hljs-string">"hasDataAttrs"</span> ) ) {
					i = attrs.length;
					<span class="hljs-keyword">while</span> ( i-- ) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Support: IE11+
The attrs elements can be null (#14894)</p></div></div><div class="code"><div class="wrapper">						<span class="hljs-keyword">if</span> ( attrs[ i ] ) {
							name = attrs[ i ].name;
							<span class="hljs-keyword">if</span> ( name.indexOf( <span class="hljs-string">"data-"</span> ) === <span class="hljs-number">0</span> ) {
								name = jQuery.camelCase( name.slice(<span class="hljs-number">5</span>) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, <span class="hljs-string">"hasDataAttrs"</span>, <span class="hljs-literal">true</span> );
				}
			}

			<span class="hljs-keyword">return</span> data;
		}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Sets multiple values</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> key === <span class="hljs-string">"object"</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				data_user.set( <span class="hljs-keyword">this</span>, key );
			});
		}

		<span class="hljs-keyword">return</span> access( <span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> value </span>) </span>{
			<span class="hljs-keyword">var</span> data,
				camelKey = jQuery.camelCase( key );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The calling jQuery object (element matches) is not empty
(and therefore has an element appears at this[ 0 ]) and the
<code>value</code> parameter was not undefined. An empty jQuery object
will result in <code>undefined</code> for elem = this[ 0 ] which will
throw an exception if an attempt to read a data cache is made.</p></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">if</span> ( elem &amp;&amp; value === <span class="hljs-literal">undefined</span> ) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Attempt to get data from the cache
with the key as-is</p></div></div><div class="code"><div class="wrapper">				data = data_user.get( elem, key );
				<span class="hljs-keyword">if</span> ( data !== <span class="hljs-literal">undefined</span> ) {
					<span class="hljs-keyword">return</span> data;
				}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Attempt to get data from the cache
with the key camelized</p></div></div><div class="code"><div class="wrapper">				data = data_user.get( elem, camelKey );
				<span class="hljs-keyword">if</span> ( data !== <span class="hljs-literal">undefined</span> ) {
					<span class="hljs-keyword">return</span> data;
				}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Attempt to &quot;discover&quot; the data in
HTML5 custom data-* attrs</p></div></div><div class="code"><div class="wrapper">				data = dataAttr( elem, camelKey, <span class="hljs-literal">undefined</span> );
				<span class="hljs-keyword">if</span> ( data !== <span class="hljs-literal">undefined</span> ) {
					<span class="hljs-keyword">return</span> data;
				}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>We tried really hard, but the data doesn&#39;t exist.</p></div></div><div class="code"><div class="wrapper">				<span class="hljs-keyword">return</span>;
			}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Set the data...</p></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>First, attempt to store a copy or reference of any
data that might&#39;ve been store with a camelCased key.</p></div></div><div class="code"><div class="wrapper">				<span class="hljs-keyword">var</span> data = data_user.get( <span class="hljs-keyword">this</span>, camelKey );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>For HTML5 data-<em> attribute interop, we have to
store property names with dashes in a camelCase form.
This might not apply to all properties...</em></p></div></div><div class="code"><div class="wrapper">				data_user.set( <span class="hljs-keyword">this</span>, camelKey, value );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>*... In the case of properties that might <em>actually</em>
have dashes, we need to also store a copy of that
unchanged property.</p></div></div><div class="code"><div class="wrapper">				<span class="hljs-keyword">if</span> ( key.indexOf(<span class="hljs-string">"-"</span>) !== -<span class="hljs-number">1</span> &amp;&amp; data !== <span class="hljs-literal">undefined</span> ) {
					data_user.set( <span class="hljs-keyword">this</span>, key, value );
				}
			});
		}, <span class="hljs-literal">null</span>, value, <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span> );
	},

	removeData: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> key </span>) </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			data_user.remove( <span class="hljs-keyword">this</span>, key );
		});
	}
});

<span class="hljs-keyword">return</span> jQuery;
});</div></div></div></div></body></html>