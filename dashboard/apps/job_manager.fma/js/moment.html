<!DOCTYPE html><html lang="en"><head><title>dashboard/apps/job_manager.fma/js/moment</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="dashboard/apps/job_manager.fma/js/moment"><meta name="groc-project-path" content="dashboard/apps/job_manager.fma/js/moment.js"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">dashboard/apps/job_manager.fma/js/moment.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-comment">//! moment.js</span>
<span class="hljs-comment">//! version : 2.8.4</span>
<span class="hljs-comment">//! authors : Tim Wood, Iskren Chernev, Moment.js contributors</span>
<span class="hljs-comment">//! license : MIT</span>
<span class="hljs-comment">//! momentjs.com</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">undefined</span>) </span>{
    <span class="hljs-comment">/************************************
        Constants
    ************************************/</span>

    <span class="hljs-keyword">var</span> moment,
        VERSION = <span class="hljs-string">'2.8.4'</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>the global-scope this is NOT the global object in Node.js</p></div></div><div class="code"><div class="wrapper">        globalScope = <span class="hljs-keyword">typeof</span> global !== <span class="hljs-string">'undefined'</span> ? global : <span class="hljs-keyword">this</span>,
        oldGlobalMoment,
        round = <span class="hljs-built_in">Math</span>.round,
        hasOwnProperty = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty,
        i,

        YEAR = <span class="hljs-number">0</span>,
        MONTH = <span class="hljs-number">1</span>,
        DATE = <span class="hljs-number">2</span>,
        HOUR = <span class="hljs-number">3</span>,
        MINUTE = <span class="hljs-number">4</span>,
        SECOND = <span class="hljs-number">5</span>,
        MILLISECOND = <span class="hljs-number">6</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>internal storage for locale config files</p></div></div><div class="code"><div class="wrapper">        locales = {},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>extra moment internal properties (plugins register props here)</p></div></div><div class="code"><div class="wrapper">        momentProperties = [],</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>check for nodeJS</p></div></div><div class="code"><div class="wrapper">        hasModule = (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">module</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports),</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>ASP.NET json date format regex</p></div></div><div class="code"><div class="wrapper">        aspNetJsonRegex = <span class="hljs-regexp">/^\/?Date\((\-?\d+)/i</span>,
        aspNetTimeSpanJsonRegex = <span class="hljs-regexp">/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>from <a href="http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html">http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html</a>
somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere</p></div></div><div class="code"><div class="wrapper">        isoDurationRegex = <span class="hljs-regexp">/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>format tokens</p></div></div><div class="code"><div class="wrapper">        formattingTokens = <span class="hljs-regexp">/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g</span>,
        localFormattingTokens = <span class="hljs-regexp">/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>parsing token regexes</p></div></div><div class="code"><div class="wrapper">        parseTokenOneOrTwoDigits = <span class="hljs-regexp">/\d\d?/</span>, <span class="hljs-comment">// 0 - 99</span>
        parseTokenOneToThreeDigits = <span class="hljs-regexp">/\d{1,3}/</span>, <span class="hljs-comment">// 0 - 999</span>
        parseTokenOneToFourDigits = <span class="hljs-regexp">/\d{1,4}/</span>, <span class="hljs-comment">// 0 - 9999</span>
        parseTokenOneToSixDigits = <span class="hljs-regexp">/[+\-]?\d{1,6}/</span>, <span class="hljs-comment">// -999,999 - 999,999</span>
        parseTokenDigits = <span class="hljs-regexp">/\d+/</span>, <span class="hljs-comment">// nonzero number of digits</span>
        parseTokenWord = <span class="hljs-regexp">/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i</span>, <span class="hljs-comment">// any word (or two) characters or numbers including two/three word month in arabic.</span>
        parseTokenTimezone = <span class="hljs-regexp">/Z|[\+\-]\d\d:?\d\d/gi</span>, <span class="hljs-comment">// +00:00 -00:00 +0000 -0000 or Z</span>
        parseTokenT = <span class="hljs-regexp">/T/i</span>, <span class="hljs-comment">// T (ISO separator)</span>
        parseTokenOffsetMs = <span class="hljs-regexp">/[\+\-]?\d+/</span>, <span class="hljs-comment">// 1234567890123</span>
        parseTokenTimestampMs = <span class="hljs-regexp">/[\+\-]?\d+(\.\d{1,3})?/</span>, <span class="hljs-comment">// 123456789 123456789.123</span>

        <span class="hljs-comment">//strict parsing regexes</span>
        parseTokenOneDigit = <span class="hljs-regexp">/\d/</span>, <span class="hljs-comment">// 0 - 9</span>
        parseTokenTwoDigits = <span class="hljs-regexp">/\d\d/</span>, <span class="hljs-comment">// 00 - 99</span>
        parseTokenThreeDigits = <span class="hljs-regexp">/\d{3}/</span>, <span class="hljs-comment">// 000 - 999</span>
        parseTokenFourDigits = <span class="hljs-regexp">/\d{4}/</span>, <span class="hljs-comment">// 0000 - 9999</span>
        parseTokenSixDigits = <span class="hljs-regexp">/[+-]?\d{6}/</span>, <span class="hljs-comment">// -999,999 - 999,999</span>
        parseTokenSignedNumber = <span class="hljs-regexp">/[+-]?\d+/</span>, <span class="hljs-comment">// -inf - inf</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>iso 8601 regex
0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)</p></div></div><div class="code"><div class="wrapper">        isoRegex = <span class="hljs-regexp">/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/</span>,

        isoFormat = <span class="hljs-string">'YYYY-MM-DDTHH:mm:ssZ'</span>,

        isoDates = [
            [<span class="hljs-string">'YYYYYY-MM-DD'</span>, <span class="hljs-regexp">/[+-]\d{6}-\d{2}-\d{2}/</span>],
            [<span class="hljs-string">'YYYY-MM-DD'</span>, <span class="hljs-regexp">/\d{4}-\d{2}-\d{2}/</span>],
            [<span class="hljs-string">'GGGG-[W]WW-E'</span>, <span class="hljs-regexp">/\d{4}-W\d{2}-\d/</span>],
            [<span class="hljs-string">'GGGG-[W]WW'</span>, <span class="hljs-regexp">/\d{4}-W\d{2}/</span>],
            [<span class="hljs-string">'YYYY-DDD'</span>, <span class="hljs-regexp">/\d{4}-\d{3}/</span>]
        ],</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>iso time formats and regexes</p></div></div><div class="code"><div class="wrapper">        isoTimes = [
            [<span class="hljs-string">'HH:mm:ss.SSSS'</span>, <span class="hljs-regexp">/(T| )\d\d:\d\d:\d\d\.\d+/</span>],
            [<span class="hljs-string">'HH:mm:ss'</span>, <span class="hljs-regexp">/(T| )\d\d:\d\d:\d\d/</span>],
            [<span class="hljs-string">'HH:mm'</span>, <span class="hljs-regexp">/(T| )\d\d:\d\d/</span>],
            [<span class="hljs-string">'HH'</span>, <span class="hljs-regexp">/(T| )\d\d/</span>]
        ],</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>timezone chunker &#39;+10:00&#39; &gt; [&#39;10&#39;, &#39;00&#39;] or &#39;-1530&#39; &gt; [&#39;-15&#39;, &#39;30&#39;]</p></div></div><div class="code"><div class="wrapper">        parseTimezoneChunker = <span class="hljs-regexp">/([\+\-]|\d\d)/gi</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>getter and setter names</p></div></div><div class="code"><div class="wrapper">        proxyGettersAndSetters = <span class="hljs-string">'Date|Hours|Minutes|Seconds|Milliseconds'</span>.split(<span class="hljs-string">'|'</span>),
        unitMillisecondFactors = {
            <span class="hljs-string">'Milliseconds'</span> : <span class="hljs-number">1</span>,
            <span class="hljs-string">'Seconds'</span> : <span class="hljs-number">1e3</span>,
            <span class="hljs-string">'Minutes'</span> : <span class="hljs-number">6e4</span>,
            <span class="hljs-string">'Hours'</span> : <span class="hljs-number">36e5</span>,
            <span class="hljs-string">'Days'</span> : <span class="hljs-number">864e5</span>,
            <span class="hljs-string">'Months'</span> : <span class="hljs-number">2592e6</span>,
            <span class="hljs-string">'Years'</span> : <span class="hljs-number">31536e6</span>
        },

        unitAliases = {
            ms : <span class="hljs-string">'millisecond'</span>,
            s : <span class="hljs-string">'second'</span>,
            m : <span class="hljs-string">'minute'</span>,
            h : <span class="hljs-string">'hour'</span>,
            d : <span class="hljs-string">'day'</span>,
            D : <span class="hljs-string">'date'</span>,
            w : <span class="hljs-string">'week'</span>,
            W : <span class="hljs-string">'isoWeek'</span>,
            M : <span class="hljs-string">'month'</span>,
            Q : <span class="hljs-string">'quarter'</span>,
            y : <span class="hljs-string">'year'</span>,
            DDD : <span class="hljs-string">'dayOfYear'</span>,
            e : <span class="hljs-string">'weekday'</span>,
            E : <span class="hljs-string">'isoWeekday'</span>,
            gg: <span class="hljs-string">'weekYear'</span>,
            GG: <span class="hljs-string">'isoWeekYear'</span>
        },

        camelFunctions = {
            dayofyear : <span class="hljs-string">'dayOfYear'</span>,
            isoweekday : <span class="hljs-string">'isoWeekday'</span>,
            isoweek : <span class="hljs-string">'isoWeek'</span>,
            weekyear : <span class="hljs-string">'weekYear'</span>,
            isoweekyear : <span class="hljs-string">'isoWeekYear'</span>
        },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>format function strings</p></div></div><div class="code"><div class="wrapper">        formatFunctions = {},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>default relative time thresholds</p></div></div><div class="code"><div class="wrapper">        relativeTimeThresholds = {
            s: <span class="hljs-number">45</span>,  <span class="hljs-comment">// seconds to minute</span>
            m: <span class="hljs-number">45</span>,  <span class="hljs-comment">// minutes to hour</span>
            h: <span class="hljs-number">22</span>,  <span class="hljs-comment">// hours to day</span>
            d: <span class="hljs-number">26</span>,  <span class="hljs-comment">// days to month</span>
            M: <span class="hljs-number">11</span>   <span class="hljs-comment">// months to year</span>
        },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>tokens to ordinalize and pad</p></div></div><div class="code"><div class="wrapper">        ordinalizeTokens = <span class="hljs-string">'DDD w W M D d'</span>.split(<span class="hljs-string">' '</span>),
        paddedTokens = <span class="hljs-string">'M D H h m s w W'</span>.split(<span class="hljs-string">' '</span>),

        formatTokenFunctions = {
            M    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.month() + <span class="hljs-number">1</span>;
            },
            MMM  : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().monthsShort(<span class="hljs-keyword">this</span>, format);
            },
            MMMM : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().months(<span class="hljs-keyword">this</span>, format);
            },
            D    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.date();
            },
            DDD  : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dayOfYear();
            },
            d    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.day();
            },
            dd   : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().weekdaysMin(<span class="hljs-keyword">this</span>, format);
            },
            ddd  : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().weekdaysShort(<span class="hljs-keyword">this</span>, format);
            },
            dddd : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().weekdays(<span class="hljs-keyword">this</span>, format);
            },
            w    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.week();
            },
            W    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isoWeek();
            },
            YY   : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.year() % <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);
            },
            YYYY : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.year(), <span class="hljs-number">4</span>);
            },
            YYYYY : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.year(), <span class="hljs-number">5</span>);
            },
            YYYYYY : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> y = <span class="hljs-keyword">this</span>.year(), sign = y &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">'+'</span> : <span class="hljs-string">'-'</span>;
                <span class="hljs-keyword">return</span> sign + leftZeroFill(<span class="hljs-built_in">Math</span>.abs(y), <span class="hljs-number">6</span>);
            },
            gg   : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.weekYear() % <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);
            },
            gggg : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.weekYear(), <span class="hljs-number">4</span>);
            },
            ggggg : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.weekYear(), <span class="hljs-number">5</span>);
            },
            GG   : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.isoWeekYear() % <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);
            },
            GGGG : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.isoWeekYear(), <span class="hljs-number">4</span>);
            },
            GGGGG : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.isoWeekYear(), <span class="hljs-number">5</span>);
            },
            e : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.weekday();
            },
            E : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isoWeekday();
            },
            a    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().meridiem(<span class="hljs-keyword">this</span>.hours(), <span class="hljs-keyword">this</span>.minutes(), <span class="hljs-literal">true</span>);
            },
            A    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().meridiem(<span class="hljs-keyword">this</span>.hours(), <span class="hljs-keyword">this</span>.minutes(), <span class="hljs-literal">false</span>);
            },
            H    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hours();
            },
            h    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hours() % <span class="hljs-number">12</span> || <span class="hljs-number">12</span>;
            },
            m    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.minutes();
            },
            s    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.seconds();
            },
            S    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> toInt(<span class="hljs-keyword">this</span>.milliseconds() / <span class="hljs-number">100</span>);
            },
            SS   : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(toInt(<span class="hljs-keyword">this</span>.milliseconds() / <span class="hljs-number">10</span>), <span class="hljs-number">2</span>);
            },
            SSS  : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.milliseconds(), <span class="hljs-number">3</span>);
            },
            SSSS : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.milliseconds(), <span class="hljs-number">3</span>);
            },
            Z    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> a = -<span class="hljs-keyword">this</span>.zone(),
                    b = <span class="hljs-string">'+'</span>;
                <span class="hljs-keyword">if</span> (a &lt; <span class="hljs-number">0</span>) {
                    a = -a;
                    b = <span class="hljs-string">'-'</span>;
                }
                <span class="hljs-keyword">return</span> b + leftZeroFill(toInt(a / <span class="hljs-number">60</span>), <span class="hljs-number">2</span>) + <span class="hljs-string">':'</span> + leftZeroFill(toInt(a) % <span class="hljs-number">60</span>, <span class="hljs-number">2</span>);
            },
            ZZ   : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> a = -<span class="hljs-keyword">this</span>.zone(),
                    b = <span class="hljs-string">'+'</span>;
                <span class="hljs-keyword">if</span> (a &lt; <span class="hljs-number">0</span>) {
                    a = -a;
                    b = <span class="hljs-string">'-'</span>;
                }
                <span class="hljs-keyword">return</span> b + leftZeroFill(toInt(a / <span class="hljs-number">60</span>), <span class="hljs-number">2</span>) + leftZeroFill(toInt(a) % <span class="hljs-number">60</span>, <span class="hljs-number">2</span>);
            },
            z : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.zoneAbbr();
            },
            zz : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.zoneName();
            },
            x    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.valueOf();
            },
            X    : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.unix();
            },
            Q : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.quarter();
            }
        },

        deprecations = {},

        lists = [<span class="hljs-string">'months'</span>, <span class="hljs-string">'monthsShort'</span>, <span class="hljs-string">'weekdays'</span>, <span class="hljs-string">'weekdaysShort'</span>, <span class="hljs-string">'weekdaysMin'</span>];</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Pick the first defined of two or three arguments. dfl comes from
default.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dfl</span>(<span class="hljs-params">a, b, c</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> a != <span class="hljs-literal">null</span> ? a : b;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">return</span> a != <span class="hljs-literal">null</span> ? a : b != <span class="hljs-literal">null</span> ? b : c;
            <span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Implement me'</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasOwnProp</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">return</span> hasOwnProperty.call(a, b);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultParsingFlags</span>(<span class="hljs-params"></span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>We need to deep clone this object, and es5 standard is not very
helpful.</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">return</span> {
            empty : <span class="hljs-literal">false</span>,
            unusedTokens : [],
            unusedInput : [],
            overflow : -<span class="hljs-number">2</span>,
            charsLeftOver : <span class="hljs-number">0</span>,
            nullInput : <span class="hljs-literal">false</span>,
            invalidMonth : <span class="hljs-literal">null</span>,
            invalidFormat : <span class="hljs-literal">false</span>,
            userInvalidated : <span class="hljs-literal">false</span>,
            iso: <span class="hljs-literal">false</span>
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printMsg</span>(<span class="hljs-params">msg</span>) </span>{
        <span class="hljs-keyword">if</span> (moment.suppressDeprecationWarnings === <span class="hljs-literal">false</span> &amp;&amp;
                <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">console</span>.warn) {
            <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Deprecation warning: '</span> + msg);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecate</span>(<span class="hljs-params">msg, fn</span>) </span>{
        <span class="hljs-keyword">var</span> firstTime = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> extend(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (firstTime) {
                printMsg(msg);
                firstTime = <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        }, fn);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecateSimple</span>(<span class="hljs-params">name, msg</span>) </span>{
        <span class="hljs-keyword">if</span> (!deprecations[name]) {
            printMsg(msg);
            deprecations[name] = <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">padToken</span>(<span class="hljs-params">func, count</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) </span>{
            <span class="hljs-keyword">return</span> leftZeroFill(func.call(<span class="hljs-keyword">this</span>, a), count);
        };
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ordinalizeToken</span>(<span class="hljs-params">func, period</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().ordinal(func.call(<span class="hljs-keyword">this</span>, a), period);
        };
    }

    <span class="hljs-keyword">while</span> (ordinalizeTokens.length) {
        i = ordinalizeTokens.pop();
        formatTokenFunctions[i + <span class="hljs-string">'o'</span>] = ordinalizeToken(formatTokenFunctions[i], i);
    }
    <span class="hljs-keyword">while</span> (paddedTokens.length) {
        i = paddedTokens.pop();
        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], <span class="hljs-number">2</span>);
    }
    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, <span class="hljs-number">3</span>);


    <span class="hljs-comment">/************************************
        Constructors
    ************************************/</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Locale</span>(<span class="hljs-params"></span>) </span>{
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Moment prototype object</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Moment</span>(<span class="hljs-params">config, skipOverflow</span>) </span>{
        <span class="hljs-keyword">if</span> (skipOverflow !== <span class="hljs-literal">false</span>) {
            checkOverflow(config);
        }
        copyConfig(<span class="hljs-keyword">this</span>, config);
        <span class="hljs-keyword">this</span>._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+config._d);
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Duration Constructor</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Duration</span>(<span class="hljs-params">duration</span>) </span>{
        <span class="hljs-keyword">var</span> normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || <span class="hljs-number">0</span>,
            quarters = normalizedInput.quarter || <span class="hljs-number">0</span>,
            months = normalizedInput.month || <span class="hljs-number">0</span>,
            weeks = normalizedInput.week || <span class="hljs-number">0</span>,
            days = normalizedInput.day || <span class="hljs-number">0</span>,
            hours = normalizedInput.hour || <span class="hljs-number">0</span>,
            minutes = normalizedInput.minute || <span class="hljs-number">0</span>,
            seconds = normalizedInput.second || <span class="hljs-number">0</span>,
            milliseconds = normalizedInput.millisecond || <span class="hljs-number">0</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>representation for dateAddRemove</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">this</span>._milliseconds = +milliseconds +
            seconds * <span class="hljs-number">1e3</span> + <span class="hljs-comment">// 1000</span>
            minutes * <span class="hljs-number">6e4</span> + <span class="hljs-comment">// 1000 * 60</span>
            hours * <span class="hljs-number">36e5</span>; <span class="hljs-comment">// 1000 * 60 * 60</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Because of dateAddRemove treats 24 hours as different from a
day when working around DST, we need to store them separately</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">this</span>._days = +days +
            weeks * <span class="hljs-number">7</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>It is impossible translate months into days without knowing
which months you are are talking about, so we have to store
it separately.</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">this</span>._months = +months +
            quarters * <span class="hljs-number">3</span> +
            years * <span class="hljs-number">12</span>;

        <span class="hljs-keyword">this</span>._data = {};

        <span class="hljs-keyword">this</span>._locale = moment.localeData();

        <span class="hljs-keyword">this</span>._bubble();
    }

    <span class="hljs-comment">/************************************
        Helpers
    ************************************/</span>


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extend</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> b) {
            <span class="hljs-keyword">if</span> (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        <span class="hljs-keyword">if</span> (hasOwnProp(b, <span class="hljs-string">'toString'</span>)) {
            a.toString = b.toString;
        }

        <span class="hljs-keyword">if</span> (hasOwnProp(b, <span class="hljs-string">'valueOf'</span>)) {
            a.valueOf = b.valueOf;
        }

        <span class="hljs-keyword">return</span> a;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyConfig</span>(<span class="hljs-params">to, from</span>) </span>{
        <span class="hljs-keyword">var</span> i, prop, val;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._isAMomentObject !== <span class="hljs-string">'undefined'</span>) {
            to._isAMomentObject = from._isAMomentObject;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._i !== <span class="hljs-string">'undefined'</span>) {
            to._i = from._i;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._f !== <span class="hljs-string">'undefined'</span>) {
            to._f = from._f;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._l !== <span class="hljs-string">'undefined'</span>) {
            to._l = from._l;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._strict !== <span class="hljs-string">'undefined'</span>) {
            to._strict = from._strict;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._tzm !== <span class="hljs-string">'undefined'</span>) {
            to._tzm = from._tzm;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._isUTC !== <span class="hljs-string">'undefined'</span>) {
            to._isUTC = from._isUTC;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._offset !== <span class="hljs-string">'undefined'</span>) {
            to._offset = from._offset;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._pf !== <span class="hljs-string">'undefined'</span>) {
            to._pf = from._pf;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> from._locale !== <span class="hljs-string">'undefined'</span>) {
            to._locale = from._locale;
        }

        <span class="hljs-keyword">if</span> (momentProperties.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val !== <span class="hljs-string">'undefined'</span>) {
                    to[prop] = val;
                }
            }
        }

        <span class="hljs-keyword">return</span> to;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">absRound</span>(<span class="hljs-params">number</span>) </span>{
        <span class="hljs-keyword">if</span> (number &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.ceil(number);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(number);
        }
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>left zero fill a number
see <a href="http://jsperf.com/left-zero-filling">http://jsperf.com/left-zero-filling</a> for performance comparison</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leftZeroFill</span>(<span class="hljs-params">number, targetLength, forceSign</span>) </span>{
        <span class="hljs-keyword">var</span> output = <span class="hljs-string">''</span> + <span class="hljs-built_in">Math</span>.abs(number),
            sign = number &gt;= <span class="hljs-number">0</span>;

        <span class="hljs-keyword">while</span> (output.length &lt; targetLength) {
            output = <span class="hljs-string">'0'</span> + output;
        }
        <span class="hljs-keyword">return</span> (sign ? (forceSign ? <span class="hljs-string">'+'</span> : <span class="hljs-string">''</span>) : <span class="hljs-string">'-'</span>) + output;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">positiveMomentsDifference</span>(<span class="hljs-params">base, other</span>) </span>{
        <span class="hljs-keyword">var</span> res = {milliseconds: <span class="hljs-number">0</span>, months: <span class="hljs-number">0</span>};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * <span class="hljs-number">12</span>;
        <span class="hljs-keyword">if</span> (base.clone().add(res.months, <span class="hljs-string">'M'</span>).isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, <span class="hljs-string">'M'</span>));

        <span class="hljs-keyword">return</span> res;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">momentsDifference</span>(<span class="hljs-params">base, other</span>) </span>{
        <span class="hljs-keyword">var</span> res;
        other = makeAs(other, base);
        <span class="hljs-keyword">if</span> (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } <span class="hljs-keyword">else</span> {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        <span class="hljs-keyword">return</span> res;
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO: remove &#39;name&#39; arg after deprecation is removed</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createAdder</span>(<span class="hljs-params">direction, name</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val, period</span>) </span>{
            <span class="hljs-keyword">var</span> dur, tmp;
            <span class="hljs-comment">//invert the arguments, but complain about it</span>
            <span class="hljs-keyword">if</span> (period !== <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-built_in">isNaN</span>(+period)) {
                deprecateSimple(name, <span class="hljs-string">'moment().'</span> + name  + <span class="hljs-string">'(period, number) is deprecated. Please use moment().'</span> + name + <span class="hljs-string">'(number, period).'</span>);
                tmp = val; val = period; period = tmp;
            }

            val = <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span> ? +val : val;
            dur = moment.duration(val, period);
            addOrSubtractDurationFromMoment(<span class="hljs-keyword">this</span>, dur, direction);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addOrSubtractDurationFromMoment</span>(<span class="hljs-params">mom, duration, isAdding, updateOffset</span>) </span>{
        <span class="hljs-keyword">var</span> milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;
        updateOffset = updateOffset == <span class="hljs-literal">null</span> ? <span class="hljs-literal">true</span> : updateOffset;

        <span class="hljs-keyword">if</span> (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        <span class="hljs-keyword">if</span> (days) {
            rawSetter(mom, <span class="hljs-string">'Date'</span>, rawGetter(mom, <span class="hljs-string">'Date'</span>) + days * isAdding);
        }
        <span class="hljs-keyword">if</span> (months) {
            rawMonthSetter(mom, rawGetter(mom, <span class="hljs-string">'Month'</span>) + months * isAdding);
        }
        <span class="hljs-keyword">if</span> (updateOffset) {
            moment.updateOffset(mom, days || months);
        }
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>check if is an array</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArray</span>(<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(input) === <span class="hljs-string">'[object Array]'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDate</span>(<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(input) === <span class="hljs-string">'[object Date]'</span> ||
            input <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>;
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>compare two arrays, return the number of differences</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareArrays</span>(<span class="hljs-params">array1, array2, dontConvert</span>) </span>{
        <span class="hljs-keyword">var</span> len = <span class="hljs-built_in">Math</span>.min(array1.length, array2.length),
            lengthDiff = <span class="hljs-built_in">Math</span>.abs(array1.length - array2.length),
            diffs = <span class="hljs-number">0</span>,
            i;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) {
            <span class="hljs-keyword">if</span> ((dontConvert &amp;&amp; array1[i] !== array2[i]) ||
                (!dontConvert &amp;&amp; toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        <span class="hljs-keyword">return</span> diffs + lengthDiff;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUnits</span>(<span class="hljs-params">units</span>) </span>{
        <span class="hljs-keyword">if</span> (units) {
            <span class="hljs-keyword">var</span> lowered = units.toLowerCase().replace(<span class="hljs-regexp">/(.)s$/</span>, <span class="hljs-string">'$1'</span>);
            units = unitAliases[units] || camelFunctions[lowered] || lowered;
        }
        <span class="hljs-keyword">return</span> units;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeObjectUnits</span>(<span class="hljs-params">inputObject</span>) </span>{
        <span class="hljs-keyword">var</span> normalizedInput = {},
            normalizedProp,
            prop;

        <span class="hljs-keyword">for</span> (prop <span class="hljs-keyword">in</span> inputObject) {
            <span class="hljs-keyword">if</span> (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                <span class="hljs-keyword">if</span> (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        <span class="hljs-keyword">return</span> normalizedInput;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeList</span>(<span class="hljs-params">field</span>) </span>{
        <span class="hljs-keyword">var</span> count, setter;

        <span class="hljs-keyword">if</span> (field.indexOf(<span class="hljs-string">'week'</span>) === <span class="hljs-number">0</span>) {
            count = <span class="hljs-number">7</span>;
            setter = <span class="hljs-string">'day'</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field.indexOf(<span class="hljs-string">'month'</span>) === <span class="hljs-number">0</span>) {
            count = <span class="hljs-number">12</span>;
            setter = <span class="hljs-string">'month'</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>;
        }

        moment[field] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format, index</span>) </span>{
            <span class="hljs-keyword">var</span> i, getter,
                method = moment._locale[field],
                results = [];

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> format === <span class="hljs-string">'number'</span>) {
                index = format;
                format = <span class="hljs-literal">undefined</span>;
            }

            getter = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
                <span class="hljs-keyword">var</span> m = moment().utc().set(setter, i);
                <span class="hljs-keyword">return</span> method.call(moment._locale, m, format || <span class="hljs-string">''</span>);
            };

            <span class="hljs-keyword">if</span> (index != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> getter(index);
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; count; i++) {
                    results.push(getter(i));
                }
                <span class="hljs-keyword">return</span> results;
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toInt</span>(<span class="hljs-params">argumentForCoercion</span>) </span>{
        <span class="hljs-keyword">var</span> coercedNumber = +argumentForCoercion,
            value = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">if</span> (coercedNumber !== <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">isFinite</span>(coercedNumber)) {
            <span class="hljs-keyword">if</span> (coercedNumber &gt;= <span class="hljs-number">0</span>) {
                value = <span class="hljs-built_in">Math</span>.floor(coercedNumber);
            } <span class="hljs-keyword">else</span> {
                value = <span class="hljs-built_in">Math</span>.ceil(coercedNumber);
            }
        }

        <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">daysInMonth</span>(<span class="hljs-params">year, month</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.UTC(year, month + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)).getUTCDate();
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">weeksInYear</span>(<span class="hljs-params">year, dow, doy</span>) </span>{
        <span class="hljs-keyword">return</span> weekOfYear(moment([year, <span class="hljs-number">11</span>, <span class="hljs-number">31</span> + dow - doy]), dow, doy).week;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">daysInYear</span>(<span class="hljs-params">year</span>) </span>{
        <span class="hljs-keyword">return</span> isLeapYear(year) ? <span class="hljs-number">366</span> : <span class="hljs-number">365</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLeapYear</span>(<span class="hljs-params">year</span>) </span>{
        <span class="hljs-keyword">return</span> (year % <span class="hljs-number">4</span> === <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> !== <span class="hljs-number">0</span>) || year % <span class="hljs-number">400</span> === <span class="hljs-number">0</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkOverflow</span>(<span class="hljs-params">m</span>) </span>{
        <span class="hljs-keyword">var</span> overflow;
        <span class="hljs-keyword">if</span> (m._a &amp;&amp; m._pf.overflow === -<span class="hljs-number">2</span>) {
            overflow =
                m._a[MONTH] &lt; <span class="hljs-number">0</span> || m._a[MONTH] &gt; <span class="hljs-number">11</span> ? MONTH :
                m._a[DATE] &lt; <span class="hljs-number">1</span> || m._a[DATE] &gt; daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :
                m._a[HOUR] &lt; <span class="hljs-number">0</span> || m._a[HOUR] &gt; <span class="hljs-number">24</span> ||
                    (m._a[HOUR] === <span class="hljs-number">24</span> &amp;&amp; (m._a[MINUTE] !== <span class="hljs-number">0</span> ||
                                           m._a[SECOND] !== <span class="hljs-number">0</span> ||
                                           m._a[MILLISECOND] !== <span class="hljs-number">0</span>)) ? HOUR :
                m._a[MINUTE] &lt; <span class="hljs-number">0</span> || m._a[MINUTE] &gt; <span class="hljs-number">59</span> ? MINUTE :
                m._a[SECOND] &lt; <span class="hljs-number">0</span> || m._a[SECOND] &gt; <span class="hljs-number">59</span> ? SECOND :
                m._a[MILLISECOND] &lt; <span class="hljs-number">0</span> || m._a[MILLISECOND] &gt; <span class="hljs-number">999</span> ? MILLISECOND :
                -<span class="hljs-number">1</span>;

            <span class="hljs-keyword">if</span> (m._pf._overflowDayOfYear &amp;&amp; (overflow &lt; YEAR || overflow &gt; DATE)) {
                overflow = DATE;
            }

            m._pf.overflow = overflow;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValid</span>(<span class="hljs-params">m</span>) </span>{
        <span class="hljs-keyword">if</span> (m._isValid == <span class="hljs-literal">null</span>) {
            m._isValid = !<span class="hljs-built_in">isNaN</span>(m._d.getTime()) &amp;&amp;
                m._pf.overflow &lt; <span class="hljs-number">0</span> &amp;&amp;
                !m._pf.empty &amp;&amp;
                !m._pf.invalidMonth &amp;&amp;
                !m._pf.nullInput &amp;&amp;
                !m._pf.invalidFormat &amp;&amp;
                !m._pf.userInvalidated;

            <span class="hljs-keyword">if</span> (m._strict) {
                m._isValid = m._isValid &amp;&amp;
                    m._pf.charsLeftOver === <span class="hljs-number">0</span> &amp;&amp;
                    m._pf.unusedTokens.length === <span class="hljs-number">0</span> &amp;&amp;
                    m._pf.bigHour === <span class="hljs-literal">undefined</span>;
            }
        }
        <span class="hljs-keyword">return</span> m._isValid;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeLocale</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">return</span> key ? key.toLowerCase().replace(<span class="hljs-string">'_'</span>, <span class="hljs-string">'-'</span>) : key;
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>pick the locale from the array
try [&#39;en-au&#39;, &#39;en-gb&#39;] as &#39;en-au&#39;, &#39;en-gb&#39;, &#39;en&#39;, as in move through the list trying each
substring from most specific to least, but move to the next array item if it&#39;s a more specific variant than the current root</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chooseLocale</span>(<span class="hljs-params">names</span>) </span>{
        <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j, next, locale, split;

        <span class="hljs-keyword">while</span> (i &lt; names.length) {
            split = normalizeLocale(names[i]).split(<span class="hljs-string">'-'</span>);
            j = split.length;
            next = normalizeLocale(names[i + <span class="hljs-number">1</span>]);
            next = next ? next.split(<span class="hljs-string">'-'</span>) : <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span>) {
                locale = loadLocale(split.slice(<span class="hljs-number">0</span>, j).join(<span class="hljs-string">'-'</span>));
                <span class="hljs-keyword">if</span> (locale) {
                    <span class="hljs-keyword">return</span> locale;
                }
                <span class="hljs-keyword">if</span> (next &amp;&amp; next.length &gt;= j &amp;&amp; compareArrays(split, next, <span class="hljs-literal">true</span>) &gt;= j - <span class="hljs-number">1</span>) {
                    <span class="hljs-comment">//the next array item is better than a shallower substring of this one</span>
                    <span class="hljs-keyword">break</span>;
                }
                j--;
            }
            i++;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadLocale</span>(<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">var</span> oldLocale = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!locales[name] &amp;&amp; hasModule) {
            <span class="hljs-keyword">try</span> {
                oldLocale = moment.locale();
                <span class="hljs-built_in">require</span>(<span class="hljs-string">'./locale/'</span> + name);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales</p></div></div><div class="code"><div class="wrapper">                moment.locale(oldLocale);
            } <span class="hljs-keyword">catch</span> (e) { }
        }
        <span class="hljs-keyword">return</span> locales[name];
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Return a moment from input, that is local/utc/zone equivalent to model.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeAs</span>(<span class="hljs-params">input, model</span>) </span>{
        <span class="hljs-keyword">var</span> res, diff;
        <span class="hljs-keyword">if</span> (model._isUTC) {
            res = model.clone();
            diff = (moment.isMoment(input) || isDate(input) ?
                    +input : +moment(input)) - (+res);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Use low-level api, because this fn is low-level api.</p></div></div><div class="code"><div class="wrapper">            res._d.setTime(+res._d + diff);
            moment.updateOffset(res, <span class="hljs-literal">false</span>);
            <span class="hljs-keyword">return</span> res;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> moment(input).local();
        }
    }

    <span class="hljs-comment">/************************************
        Locale
    ************************************/</span>


    extend(Locale.prototype, {

        set : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{
            <span class="hljs-keyword">var</span> prop, i;
            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> config) {
                prop = config[i];
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> prop === <span class="hljs-string">'function'</span>) {
                    <span class="hljs-keyword">this</span>[i] = prop;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>[<span class="hljs-string">'_'</span> + i] = prop;
                }
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Lenient ordinal parsing accepts just a number in addition to
number + (possibly) stuff coming from _ordinalParseLenient.</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">this</span>._ordinalParseLenient = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-keyword">this</span>._ordinalParse.source + <span class="hljs-string">'|'</span> + <span class="hljs-regexp">/\d{1,2}/</span>.source);
        },

        _months : <span class="hljs-string">'January_February_March_April_May_June_July_August_September_October_November_December'</span>.split(<span class="hljs-string">'_'</span>),
        months : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._months[m.month()];
        },

        _monthsShort : <span class="hljs-string">'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'</span>.split(<span class="hljs-string">'_'</span>),
        monthsShort : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._monthsShort[m.month()];
        },

        monthsParse : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">monthName, format, strict</span>) </span>{
            <span class="hljs-keyword">var</span> i, mom, regex;

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._monthsParse) {
                <span class="hljs-keyword">this</span>._monthsParse = [];
                <span class="hljs-keyword">this</span>._longMonthsParse = [];
                <span class="hljs-keyword">this</span>._shortMonthsParse = [];
            }

            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">12</span>; i++) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>make the regex if we don&#39;t have it already</p></div></div><div class="code"><div class="wrapper">                mom = moment.utc([<span class="hljs-number">2000</span>, i]);
                <span class="hljs-keyword">if</span> (strict &amp;&amp; !<span class="hljs-keyword">this</span>._longMonthsParse[i]) {
                    <span class="hljs-keyword">this</span>._longMonthsParse[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>.months(mom, <span class="hljs-string">''</span>).replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>) + <span class="hljs-string">'$'</span>, <span class="hljs-string">'i'</span>);
                    <span class="hljs-keyword">this</span>._shortMonthsParse[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>.monthsShort(mom, <span class="hljs-string">''</span>).replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>) + <span class="hljs-string">'$'</span>, <span class="hljs-string">'i'</span>);
                }
                <span class="hljs-keyword">if</span> (!strict &amp;&amp; !<span class="hljs-keyword">this</span>._monthsParse[i]) {
                    regex = <span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>.months(mom, <span class="hljs-string">''</span>) + <span class="hljs-string">'|^'</span> + <span class="hljs-keyword">this</span>.monthsShort(mom, <span class="hljs-string">''</span>);
                    <span class="hljs-keyword">this</span>._monthsParse[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regex.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>), <span class="hljs-string">'i'</span>);
                }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>test the regex</p></div></div><div class="code"><div class="wrapper">                <span class="hljs-keyword">if</span> (strict &amp;&amp; format === <span class="hljs-string">'MMMM'</span> &amp;&amp; <span class="hljs-keyword">this</span>._longMonthsParse[i].test(monthName)) {
                    <span class="hljs-keyword">return</span> i;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strict &amp;&amp; format === <span class="hljs-string">'MMM'</span> &amp;&amp; <span class="hljs-keyword">this</span>._shortMonthsParse[i].test(monthName)) {
                    <span class="hljs-keyword">return</span> i;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!strict &amp;&amp; <span class="hljs-keyword">this</span>._monthsParse[i].test(monthName)) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        },

        _weekdays : <span class="hljs-string">'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'</span>.split(<span class="hljs-string">'_'</span>),
        weekdays : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._weekdays[m.day()];
        },

        _weekdaysShort : <span class="hljs-string">'Sun_Mon_Tue_Wed_Thu_Fri_Sat'</span>.split(<span class="hljs-string">'_'</span>),
        weekdaysShort : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._weekdaysShort[m.day()];
        },

        _weekdaysMin : <span class="hljs-string">'Su_Mo_Tu_We_Th_Fr_Sa'</span>.split(<span class="hljs-string">'_'</span>),
        weekdaysMin : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._weekdaysMin[m.day()];
        },

        weekdaysParse : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">weekdayName</span>) </span>{
            <span class="hljs-keyword">var</span> i, mom, regex;

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._weekdaysParse) {
                <span class="hljs-keyword">this</span>._weekdaysParse = [];
            }

            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>make the regex if we don&#39;t have it already</p></div></div><div class="code"><div class="wrapper">                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._weekdaysParse[i]) {
                    mom = moment([<span class="hljs-number">2000</span>, <span class="hljs-number">1</span>]).day(i);
                    regex = <span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>.weekdays(mom, <span class="hljs-string">''</span>) + <span class="hljs-string">'|^'</span> + <span class="hljs-keyword">this</span>.weekdaysShort(mom, <span class="hljs-string">''</span>) + <span class="hljs-string">'|^'</span> + <span class="hljs-keyword">this</span>.weekdaysMin(mom, <span class="hljs-string">''</span>);
                    <span class="hljs-keyword">this</span>._weekdaysParse[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regex.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>), <span class="hljs-string">'i'</span>);
                }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>test the regex</p></div></div><div class="code"><div class="wrapper">                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._weekdaysParse[i].test(weekdayName)) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        },

        _longDateFormat : {
            LTS : <span class="hljs-string">'h:mm:ss A'</span>,
            LT : <span class="hljs-string">'h:mm A'</span>,
            L : <span class="hljs-string">'MM/DD/YYYY'</span>,
            LL : <span class="hljs-string">'MMMM D, YYYY'</span>,
            LLL : <span class="hljs-string">'MMMM D, YYYY LT'</span>,
            LLLL : <span class="hljs-string">'dddd, MMMM D, YYYY LT'</span>
        },
        longDateFormat : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-keyword">this</span>._longDateFormat[key];
            <span class="hljs-keyword">if</span> (!output &amp;&amp; <span class="hljs-keyword">this</span>._longDateFormat[key.toUpperCase()]) {
                output = <span class="hljs-keyword">this</span>._longDateFormat[key.toUpperCase()].replace(<span class="hljs-regexp">/MMMM|MM|DD|dddd/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
                    <span class="hljs-keyword">return</span> val.slice(<span class="hljs-number">1</span>);
                });
                <span class="hljs-keyword">this</span>._longDateFormat[key] = output;
            }
            <span class="hljs-keyword">return</span> output;
        },

        isPM : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>IE8 Quirks Mode &amp; IE7 Standards Mode do not allow accessing strings like arrays
Using charAt should be more compatible.</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">return</span> ((input + <span class="hljs-string">''</span>).toLowerCase().charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'p'</span>);
        },

        _meridiemParse : <span class="hljs-regexp">/[ap]\.?m?\.?/i</span>,
        meridiem : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">hours, minutes, isLower</span>) </span>{
            <span class="hljs-keyword">if</span> (hours &gt; <span class="hljs-number">11</span>) {
                <span class="hljs-keyword">return</span> isLower ? <span class="hljs-string">'pm'</span> : <span class="hljs-string">'PM'</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> isLower ? <span class="hljs-string">'am'</span> : <span class="hljs-string">'AM'</span>;
            }
        },

        _calendar : {
            sameDay : <span class="hljs-string">'[Today at] LT'</span>,
            nextDay : <span class="hljs-string">'[Tomorrow at] LT'</span>,
            nextWeek : <span class="hljs-string">'dddd [at] LT'</span>,
            lastDay : <span class="hljs-string">'[Yesterday at] LT'</span>,
            lastWeek : <span class="hljs-string">'[Last] dddd [at] LT'</span>,
            sameElse : <span class="hljs-string">'L'</span>
        },
        calendar : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, mom, now</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-keyword">this</span>._calendar[key];
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> output === <span class="hljs-string">'function'</span> ? output.apply(mom, [now]) : output;
        },

        _relativeTime : {
            future : <span class="hljs-string">'in %s'</span>,
            past : <span class="hljs-string">'%s ago'</span>,
            s : <span class="hljs-string">'a few seconds'</span>,
            m : <span class="hljs-string">'a minute'</span>,
            mm : <span class="hljs-string">'%d minutes'</span>,
            h : <span class="hljs-string">'an hour'</span>,
            hh : <span class="hljs-string">'%d hours'</span>,
            d : <span class="hljs-string">'a day'</span>,
            dd : <span class="hljs-string">'%d days'</span>,
            M : <span class="hljs-string">'a month'</span>,
            MM : <span class="hljs-string">'%d months'</span>,
            y : <span class="hljs-string">'a year'</span>,
            yy : <span class="hljs-string">'%d years'</span>
        },

        relativeTime : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, withoutSuffix, string, isFuture</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-keyword">this</span>._relativeTime[string];
            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> output === <span class="hljs-string">'function'</span>) ?
                output(number, withoutSuffix, string, isFuture) :
                output.replace(<span class="hljs-regexp">/%d/i</span>, number);
        },

        pastFuture : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">diff, output</span>) </span>{
            <span class="hljs-keyword">var</span> format = <span class="hljs-keyword">this</span>._relativeTime[diff &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'future'</span> : <span class="hljs-string">'past'</span>];
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> format === <span class="hljs-string">'function'</span> ? format(output) : format.replace(<span class="hljs-regexp">/%s/i</span>, output);
        },

        ordinal : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ordinal.replace(<span class="hljs-string">'%d'</span>, number);
        },
        _ordinal : <span class="hljs-string">'%d'</span>,
        _ordinalParse : <span class="hljs-regexp">/\d{1,2}/</span>,

        preparse : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">string</span>) </span>{
            <span class="hljs-keyword">return</span> string;
        },

        postformat : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">string</span>) </span>{
            <span class="hljs-keyword">return</span> string;
        },

        week : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mom</span>) </span>{
            <span class="hljs-keyword">return</span> weekOfYear(mom, <span class="hljs-keyword">this</span>._week.dow, <span class="hljs-keyword">this</span>._week.doy).week;
        },

        _week : {
            dow : <span class="hljs-number">0</span>, <span class="hljs-comment">// Sunday is the first day of the week.</span>
            doy : <span class="hljs-number">6</span>  <span class="hljs-comment">// The week that contains Jan 1st is the first week of the year.</span>
        },

        _invalidDate: <span class="hljs-string">'Invalid date'</span>,
        invalidDate: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._invalidDate;
        }
    });

    <span class="hljs-comment">/************************************
        Formatting
    ************************************/</span>


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFormattingTokens</span>(<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">if</span> (input.match(<span class="hljs-regexp">/\[[\s\S]/</span>)) {
            <span class="hljs-keyword">return</span> input.replace(<span class="hljs-regexp">/^\[|\]$/g</span>, <span class="hljs-string">''</span>);
        }
        <span class="hljs-keyword">return</span> input.replace(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">''</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeFormatFunction</span>(<span class="hljs-params">format</span>) </span>{
        <span class="hljs-keyword">var</span> array = format.match(formattingTokens), i, length;

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, length = array.length; i &lt; length; i++) {
            <span class="hljs-keyword">if</span> (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } <span class="hljs-keyword">else</span> {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mom</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length; i++) {
                output += array[i] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span> ? array[i].call(mom, format) : array[i];
            }
            <span class="hljs-keyword">return</span> output;
        };
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>format date using native date object</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatMoment</span>(<span class="hljs-params">m, format</span>) </span>{
        <span class="hljs-keyword">if</span> (!m.isValid()) {
            <span class="hljs-keyword">return</span> m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());

        <span class="hljs-keyword">if</span> (!formatFunctions[format]) {
            formatFunctions[format] = makeFormatFunction(format);
        }

        <span class="hljs-keyword">return</span> formatFunctions[format](m);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expandFormat</span>(<span class="hljs-params">format, locale</span>) </span>{
        <span class="hljs-keyword">var</span> i = <span class="hljs-number">5</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceLongDateFormatTokens</span>(<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">return</span> locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = <span class="hljs-number">0</span>;
            i -= <span class="hljs-number">1</span>;
        }

        <span class="hljs-keyword">return</span> format;
    }


    <span class="hljs-comment">/************************************
        Parsing
    ************************************/</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>get the regex to find the next token</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getParseRegexForToken</span>(<span class="hljs-params">token, config</span>) </span>{
        <span class="hljs-keyword">var</span> a, strict = config._strict;
        <span class="hljs-keyword">switch</span> (token) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Q'</span>:
            <span class="hljs-keyword">return</span> parseTokenOneDigit;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDDD'</span>:
            <span class="hljs-keyword">return</span> parseTokenThreeDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gggg'</span>:
            <span class="hljs-keyword">return</span> strict ? parseTokenFourDigits : parseTokenOneToFourDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Y'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'G'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'g'</span>:
            <span class="hljs-keyword">return</span> parseTokenSignedNumber;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGGG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ggggg'</span>:
            <span class="hljs-keyword">return</span> strict ? parseTokenSixDigits : parseTokenOneToSixDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'S'</span>:
            <span class="hljs-keyword">if</span> (strict) {
                <span class="hljs-keyword">return</span> parseTokenOneDigit;
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'SS'</span>:
            <span class="hljs-keyword">if</span> (strict) {
                <span class="hljs-keyword">return</span> parseTokenTwoDigits;
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSS'</span>:
            <span class="hljs-keyword">if</span> (strict) {
                <span class="hljs-keyword">return</span> parseTokenThreeDigits;
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDD'</span>:
            <span class="hljs-keyword">return</span> parseTokenOneToThreeDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMM'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMMM'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ddd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dddd'</span>:
            <span class="hljs-keyword">return</span> parseTokenWord;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'a'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'A'</span>:
            <span class="hljs-keyword">return</span> config._locale._meridiemParse;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'x'</span>:
            <span class="hljs-keyword">return</span> parseTokenOffsetMs;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'X'</span>:
            <span class="hljs-keyword">return</span> parseTokenTimestampMs;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Z'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ZZ'</span>:
            <span class="hljs-keyword">return</span> parseTokenTimezone;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'T'</span>:
            <span class="hljs-keyword">return</span> parseTokenT;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSSS'</span>:
            <span class="hljs-keyword">return</span> parseTokenDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MM'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DD'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gg'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'HH'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'hh'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'mm'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ss'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ww'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'WW'</span>:
            <span class="hljs-keyword">return</span> strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'M'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'D'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'d'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'H'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'h'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'m'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'s'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'w'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'W'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'e'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'E'</span>:
            <span class="hljs-keyword">return</span> parseTokenOneOrTwoDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Do'</span>:
            <span class="hljs-keyword">return</span> strict ? config._locale._ordinalParse : config._locale._ordinalParseLenient;
        <span class="hljs-keyword">default</span> :
            a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regexpEscape(unescapeFormat(token.replace(<span class="hljs-string">'\\'</span>, <span class="hljs-string">''</span>)), <span class="hljs-string">'i'</span>));
            <span class="hljs-keyword">return</span> a;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timezoneMinutesFromString</span>(<span class="hljs-params">string</span>) </span>{
        string = string || <span class="hljs-string">''</span>;
        <span class="hljs-keyword">var</span> possibleTzMatches = (string.match(parseTokenTimezone) || []),
            tzChunk = possibleTzMatches[possibleTzMatches.length - <span class="hljs-number">1</span>] || [],
            parts = (tzChunk + <span class="hljs-string">''</span>).match(parseTimezoneChunker) || [<span class="hljs-string">'-'</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
            minutes = +(parts[<span class="hljs-number">1</span>] * <span class="hljs-number">60</span>) + toInt(parts[<span class="hljs-number">2</span>]);

        <span class="hljs-keyword">return</span> parts[<span class="hljs-number">0</span>] === <span class="hljs-string">'+'</span> ? -minutes : minutes;
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>function to convert string input to date</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTimeToArrayFromToken</span>(<span class="hljs-params">token, input, config</span>) </span>{
        <span class="hljs-keyword">var</span> a, datePartArray = config._a;

        <span class="hljs-keyword">switch</span> (token) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>QUARTER</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'Q'</span>:
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[MONTH] = (toInt(input) - <span class="hljs-number">1</span>) * <span class="hljs-number">3</span>;
            }
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>MONTH</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'M'</span> : <span class="hljs-comment">// fall through to MM</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MM'</span> :
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[MONTH] = toInt(input) - <span class="hljs-number">1</span>;
            }
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMM'</span> : <span class="hljs-comment">// fall through to MMMM</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMMM'</span> :
            a = config._locale.monthsParse(input, token, config._strict);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>if we didn&#39;t find a month name, mark the date as invalid.</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
                datePartArray[MONTH] = a;
            } <span class="hljs-keyword">else</span> {
                config._pf.invalidMonth = input;
            }
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>DAY OF MONTH</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'D'</span> : <span class="hljs-comment">// fall through to DD</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DD'</span> :
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[DATE] = toInt(input);
            }
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Do'</span> :
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[DATE] = toInt(<span class="hljs-built_in">parseInt</span>(
                            input.match(<span class="hljs-regexp">/\d{1,2}/</span>)[<span class="hljs-number">0</span>], <span class="hljs-number">10</span>));
            }
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>DAY OF YEAR</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDD'</span> : <span class="hljs-comment">// fall through to DDDD</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDDD'</span> :
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                config._dayOfYear = toInt(input);
            }

            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>YEAR</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'YY'</span> :
            datePartArray[YEAR] = moment.parseTwoDigitYear(input);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYY'</span> :
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYY'</span> :
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYYY'</span> :
            datePartArray[YEAR] = toInt(input);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>AM / PM</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'a'</span> : <span class="hljs-comment">// fall through to A</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'A'</span> :
            config._isPm = config._locale.isPM(input);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>HOUR</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'h'</span> : <span class="hljs-comment">// fall through to hh</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'hh'</span> :
            config._pf.bigHour = <span class="hljs-literal">true</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'H'</span> : <span class="hljs-comment">// fall through to HH</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'HH'</span> :
            datePartArray[HOUR] = toInt(input);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>MINUTE</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'m'</span> : <span class="hljs-comment">// fall through to mm</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'mm'</span> :
            datePartArray[MINUTE] = toInt(input);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>SECOND</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'s'</span> : <span class="hljs-comment">// fall through to ss</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ss'</span> :
            datePartArray[SECOND] = toInt(input);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>MILLISECOND</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'S'</span> :
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SS'</span> :
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSS'</span> :
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSSS'</span> :
            datePartArray[MILLISECOND] = toInt((<span class="hljs-string">'0.'</span> + input) * <span class="hljs-number">1000</span>);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>UNIX OFFSET (MILLISECONDS)</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'x'</span>:
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(toInt(input));
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>UNIX TIMESTAMP WITH MS</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'X'</span>:
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseFloat</span>(input) * <span class="hljs-number">1000</span>);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TIMEZONE</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'Z'</span> : <span class="hljs-comment">// fall through to ZZ</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ZZ'</span> :
            config._useUTC = <span class="hljs-literal">true</span>;
            config._tzm = timezoneMinutesFromString(input);
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>WEEKDAY - human</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'dd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ddd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dddd'</span>:
            a = config._locale.weekdaysParse(input);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>if we didn&#39;t get a weekday name, mark the date as invalid</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
                config._w = config._w || {};
                config._w[<span class="hljs-string">'d'</span>] = a;
            } <span class="hljs-keyword">else</span> {
                config._pf.invalidWeekday = input;
            }
            <span class="hljs-keyword">break</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>WEEK, WEEK DAY - numeric</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'w'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ww'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'W'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'WW'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'d'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'e'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'E'</span>:
            token = token.substr(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">case</span> <span class="hljs-string">'gggg'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGGG'</span>:
            token = token.substr(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            <span class="hljs-keyword">if</span> (input) {
                config._w = config._w || {};
                config._w[token] = toInt(input);
            }
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gg'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GG'</span>:
            config._w = config._w || {};
            config._w[token] = moment.parseTwoDigitYear(input);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dayOfYearFromWeekInfo</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> w, weekYear, week, weekday, dow, doy, temp;

        w = config._w;
        <span class="hljs-keyword">if</span> (w.GG != <span class="hljs-literal">null</span> || w.W != <span class="hljs-literal">null</span> || w.E != <span class="hljs-literal">null</span>) {
            dow = <span class="hljs-number">1</span>;
            doy = <span class="hljs-number">4</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO: We need to take the current isoWeekYear, but that depends on
how we interpret now (local, utc, fixed offset). So create
a now version of current config (take local/utc/offset flags, and
create now).</p></div></div><div class="code"><div class="wrapper">            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), <span class="hljs-number">1</span>, <span class="hljs-number">4</span>).year);
            week = dfl(w.W, <span class="hljs-number">1</span>);
            weekday = dfl(w.E, <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);
            week = dfl(w.w, <span class="hljs-number">1</span>);

            <span class="hljs-keyword">if</span> (w.d != <span class="hljs-literal">null</span>) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>weekday -- low day numbers are considered next week</p></div></div><div class="code"><div class="wrapper">                weekday = w.d;
                <span class="hljs-keyword">if</span> (weekday &lt; dow) {
                    ++week;
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (w.e != <span class="hljs-literal">null</span>) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>local weekday -- counting starts from begining of week</p></div></div><div class="code"><div class="wrapper">                weekday = w.e + dow;
            } <span class="hljs-keyword">else</span> {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>default to begining of week</p></div></div><div class="code"><div class="wrapper">                weekday = dow;
            }
        }
        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);

        config._a[YEAR] = temp.year;
        config._dayOfYear = temp.dayOfYear;
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>convert an array to a date.
the array should mirror the parameters below
note: all values past the year are optional and will default to the lowest possible value.
[year, month, day , hour, minute, second, millisecond]</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateFromConfig</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> i, date, input = [], currentDate, yearToUse;

        <span class="hljs-keyword">if</span> (config._d) {
            <span class="hljs-keyword">return</span>;
        }

        currentDate = currentDateArray(config);

        <span class="hljs-comment">//compute day of the year from weeks and weekdays</span>
        <span class="hljs-keyword">if</span> (config._w &amp;&amp; config._a[DATE] == <span class="hljs-literal">null</span> &amp;&amp; config._a[MONTH] == <span class="hljs-literal">null</span>) {
            dayOfYearFromWeekInfo(config);
        }

        <span class="hljs-comment">//if the day of the year is set, figure out what it is</span>
        <span class="hljs-keyword">if</span> (config._dayOfYear) {
            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);

            <span class="hljs-keyword">if</span> (config._dayOfYear &gt; daysInYear(yearToUse)) {
                config._pf._overflowDayOfYear = <span class="hljs-literal">true</span>;
            }

            date = makeUTCDate(yearToUse, <span class="hljs-number">0</span>, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Default to current date.</p>
<ul>
<li>if no year, month, day of month are given, default to today</li>
<li>if day of month is given, default month and year</li>
<li>if month is given, default only year</li>
<li>if year is given, don&#39;t default anything</li>
</ul></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span> &amp;&amp; config._a[i] == <span class="hljs-literal">null</span>; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Zero out whatever was not defaulted, including time</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">for</span> (; i &lt; <span class="hljs-number">7</span>; i++) {
            config._a[i] = input[i] = (config._a[i] == <span class="hljs-literal">null</span>) ? (i === <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>) : config._a[i];
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Check for 24:00:00.000</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">if</span> (config._a[HOUR] === <span class="hljs-number">24</span> &amp;&amp;
                config._a[MINUTE] === <span class="hljs-number">0</span> &amp;&amp;
                config._a[SECOND] === <span class="hljs-number">0</span> &amp;&amp;
                config._a[MILLISECOND] === <span class="hljs-number">0</span>) {
            config._nextDay = <span class="hljs-literal">true</span>;
            config._a[HOUR] = <span class="hljs-number">0</span>;
        }

        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(<span class="hljs-literal">null</span>, input);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Apply timezone offset from input. The actual zone can be changed
with parseZone.</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">if</span> (config._tzm != <span class="hljs-literal">null</span>) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() + config._tzm);
        }

        <span class="hljs-keyword">if</span> (config._nextDay) {
            config._a[HOUR] = <span class="hljs-number">24</span>;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateFromObject</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> normalizedInput;

        <span class="hljs-keyword">if</span> (config._d) {
            <span class="hljs-keyword">return</span>;
        }

        normalizedInput = normalizeObjectUnits(config._i);
        config._a = [
            normalizedInput.year,
            normalizedInput.month,
            normalizedInput.day || normalizedInput.date,
            normalizedInput.hour,
            normalizedInput.minute,
            normalizedInput.second,
            normalizedInput.millisecond
        ];

        dateFromConfig(config);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">currentDateArray</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        <span class="hljs-keyword">if</span> (config._useUTC) {
            <span class="hljs-keyword">return</span> [
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate()
            ];
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> [now.getFullYear(), now.getMonth(), now.getDate()];
        }
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>date from string and format string</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromStringAndFormat</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">if</span> (config._f === moment.ISO_8601) {
            parseISO(config);
            <span class="hljs-keyword">return</span>;
        }

        config._a = [];
        config._pf.empty = <span class="hljs-literal">true</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This array is used to make a Date, either with <code>new Date</code> or <code>Date.UTC</code></p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">var</span> string = <span class="hljs-string">''</span> + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = <span class="hljs-number">0</span>;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">if</span> (parsedInput) {
                skipped = string.substr(<span class="hljs-number">0</span>, string.indexOf(parsedInput));
                <span class="hljs-keyword">if</span> (skipped.length &gt; <span class="hljs-number">0</span>) {
                    config._pf.unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>don&#39;t parse if it&#39;s not a known token</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">if</span> (formatTokenFunctions[token]) {
                <span class="hljs-keyword">if</span> (parsedInput) {
                    config._pf.empty = <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">else</span> {
                    config._pf.unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (config._strict &amp;&amp; !parsedInput) {
                config._pf.unusedTokens.push(token);
            }
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>add remaining unparsed input length to the string</p></div></div><div class="code"><div class="wrapper">        config._pf.charsLeftOver = stringLength - totalParsedInputLength;
        <span class="hljs-keyword">if</span> (string.length &gt; <span class="hljs-number">0</span>) {
            config._pf.unusedInput.push(string);
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>clear _12h flag if hour is &lt;= 12</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">if</span> (config._pf.bigHour === <span class="hljs-literal">true</span> &amp;&amp; config._a[HOUR] &lt;= <span class="hljs-number">12</span>) {
            config._pf.bigHour = <span class="hljs-literal">undefined</span>;
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>handle am pm</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">if</span> (config._isPm &amp;&amp; config._a[HOUR] &lt; <span class="hljs-number">12</span>) {
            config._a[HOUR] += <span class="hljs-number">12</span>;
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>if is 12 am, change hours to 0</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">if</span> (config._isPm === <span class="hljs-literal">false</span> &amp;&amp; config._a[HOUR] === <span class="hljs-number">12</span>) {
            config._a[HOUR] = <span class="hljs-number">0</span>;
        }
        dateFromConfig(config);
        checkOverflow(config);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unescapeFormat</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> s.replace(<span class="hljs-regexp">/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">matched, p1, p2, p3, p4</span>) </span>{
            <span class="hljs-keyword">return</span> p1 || p2 || p3 || p4;
        });
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Code from <a href="http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript">http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript</a></p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regexpEscape</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> s.replace(<span class="hljs-regexp">/[-\/\\^$*+?.()|[\]{}]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>date from string and array of format strings</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromStringAndArray</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        <span class="hljs-keyword">if</span> (config._f.length === <span class="hljs-number">0</span>) {
            config._pf.invalidFormat = <span class="hljs-literal">true</span>;
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-literal">NaN</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; config._f.length; i++) {
            currentScore = <span class="hljs-number">0</span>;
            tempConfig = copyConfig({}, config);
            <span class="hljs-keyword">if</span> (config._useUTC != <span class="hljs-literal">null</span>) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._pf = defaultParsingFlags();
            tempConfig._f = config._f[i];
            makeDateFromStringAndFormat(tempConfig);

            <span class="hljs-keyword">if</span> (!isValid(tempConfig)) {
                <span class="hljs-keyword">continue</span>;
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>if there is any input that was not parsed add a penalty for that format</p></div></div><div class="code"><div class="wrapper">            currentScore += tempConfig._pf.charsLeftOver;

            <span class="hljs-comment">//or tokens</span>
            currentScore += tempConfig._pf.unusedTokens.length * <span class="hljs-number">10</span>;

            tempConfig._pf.score = currentScore;

            <span class="hljs-keyword">if</span> (scoreToBeat == <span class="hljs-literal">null</span> || currentScore &lt; scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>date from iso format</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseISO</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> i, l,
            string = config._i,
            match = isoRegex.exec(string);

        <span class="hljs-keyword">if</span> (match) {
            config._pf.iso = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, l = isoDates.length; i &lt; l; i++) {
                <span class="hljs-keyword">if</span> (isoDates[i][<span class="hljs-number">1</span>].exec(string)) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>match[5] should be &#39;T&#39; or undefined</p></div></div><div class="code"><div class="wrapper">                    config._f = isoDates[i][<span class="hljs-number">0</span>] + (match[<span class="hljs-number">6</span>] || <span class="hljs-string">' '</span>);
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, l = isoTimes.length; i &lt; l; i++) {
                <span class="hljs-keyword">if</span> (isoTimes[i][<span class="hljs-number">1</span>].exec(string)) {
                    config._f += isoTimes[i][<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">if</span> (string.match(parseTokenTimezone)) {
                config._f += <span class="hljs-string">'Z'</span>;
            }
            makeDateFromStringAndFormat(config);
        } <span class="hljs-keyword">else</span> {
            config._isValid = <span class="hljs-literal">false</span>;
        }
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>date from iso format or fallback</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromString</span>(<span class="hljs-params">config</span>) </span>{
        parseISO(config);
        <span class="hljs-keyword">if</span> (config._isValid === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">delete</span> config._isValid;
            moment.createFromInputFallback(config);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>(<span class="hljs-params">arr, fn</span>) </span>{
        <span class="hljs-keyword">var</span> res = [], i;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        <span class="hljs-keyword">return</span> res;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromInput</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> input = config._i, matched;
        <span class="hljs-keyword">if</span> (input === <span class="hljs-literal">undefined</span>) {
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDate(input)) {
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+input);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((matched = aspNetJsonRegex.exec(input)) !== <span class="hljs-literal">null</span>) {
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+matched[<span class="hljs-number">1</span>]);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
            makeDateFromString(config);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(input)) {
            config._a = map(input.slice(<span class="hljs-number">0</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(obj, <span class="hljs-number">10</span>);
            });
            dateFromConfig(config);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(input) === <span class="hljs-string">'object'</span>) {
            dateFromObject(config);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(input) === <span class="hljs-string">'number'</span>) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>from milliseconds</p></div></div><div class="code"><div class="wrapper">            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(input);
        } <span class="hljs-keyword">else</span> {
            moment.createFromInputFallback(config);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDate</span>(<span class="hljs-params">y, m, d, h, M, s, ms</span>) </span>{
        <span class="hljs-comment">//can't just apply() to create a date:</span>
        <span class="hljs-comment">//http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply</span>
        <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(y, m, d, h, M, s, ms);

        <span class="hljs-comment">//the date constructor doesn't accept years &lt; 1970</span>
        <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">1970</span>) {
            date.setFullYear(y);
        }
        <span class="hljs-keyword">return</span> date;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeUTCDate</span>(<span class="hljs-params">y</span>) </span>{
        <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.UTC.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>));
        <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">1970</span>) {
            date.setUTCFullYear(y);
        }
        <span class="hljs-keyword">return</span> date;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseWeekday</span>(<span class="hljs-params">input, locale</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(input)) {
                input = <span class="hljs-built_in">parseInt</span>(input, <span class="hljs-number">10</span>);
            }
            <span class="hljs-keyword">else</span> {
                input = locale.weekdaysParse(input);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input !== <span class="hljs-string">'number'</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> input;
    }

    <span class="hljs-comment">/************************************
        Relative Time
    ************************************/</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">substituteTimeAgo</span>(<span class="hljs-params">string, number, withoutSuffix, isFuture, locale</span>) </span>{
        <span class="hljs-keyword">return</span> locale.relativeTime(number || <span class="hljs-number">1</span>, !!withoutSuffix, string, isFuture);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">relativeTime</span>(<span class="hljs-params">posNegDuration, withoutSuffix, locale</span>) </span>{
        <span class="hljs-keyword">var</span> duration = moment.duration(posNegDuration).abs(),
            seconds = round(duration.as(<span class="hljs-string">'s'</span>)),
            minutes = round(duration.as(<span class="hljs-string">'m'</span>)),
            hours = round(duration.as(<span class="hljs-string">'h'</span>)),
            days = round(duration.as(<span class="hljs-string">'d'</span>)),
            months = round(duration.as(<span class="hljs-string">'M'</span>)),
            years = round(duration.as(<span class="hljs-string">'y'</span>)),

            args = seconds &lt; relativeTimeThresholds.s &amp;&amp; [<span class="hljs-string">'s'</span>, seconds] ||
                minutes === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'m'</span>] ||
                minutes &lt; relativeTimeThresholds.m &amp;&amp; [<span class="hljs-string">'mm'</span>, minutes] ||
                hours === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'h'</span>] ||
                hours &lt; relativeTimeThresholds.h &amp;&amp; [<span class="hljs-string">'hh'</span>, hours] ||
                days === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'d'</span>] ||
                days &lt; relativeTimeThresholds.d &amp;&amp; [<span class="hljs-string">'dd'</span>, days] ||
                months === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'M'</span>] ||
                months &lt; relativeTimeThresholds.M &amp;&amp; [<span class="hljs-string">'MM'</span>, months] ||
                years === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'y'</span>] || [<span class="hljs-string">'yy'</span>, years];

        args[<span class="hljs-number">2</span>] = withoutSuffix;
        args[<span class="hljs-number">3</span>] = +posNegDuration &gt; <span class="hljs-number">0</span>;
        args[<span class="hljs-number">4</span>] = locale;
        <span class="hljs-keyword">return</span> substituteTimeAgo.apply({}, args);
    }


    <span class="hljs-comment">/************************************
        Week of Year
    ************************************/</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>firstDayOfWeek       0 = sun, 6 = sat
                     the day of the week that starts the week
                     (usually sunday or monday)
firstDayOfWeekOfYear 0 = sun, 6 = sat
                     the first week is the week that contains the first
                     of this day of the week
                     (eg. ISO weeks use thursday (4))</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">weekOfYear</span>(<span class="hljs-params">mom, firstDayOfWeek, firstDayOfWeekOfYear</span>) </span>{
        <span class="hljs-keyword">var</span> end = firstDayOfWeekOfYear - firstDayOfWeek,
            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),
            adjustedMoment;


        <span class="hljs-keyword">if</span> (daysToDayOfWeek &gt; end) {
            daysToDayOfWeek -= <span class="hljs-number">7</span>;
        }

        <span class="hljs-keyword">if</span> (daysToDayOfWeek &lt; end - <span class="hljs-number">7</span>) {
            daysToDayOfWeek += <span class="hljs-number">7</span>;
        }

        adjustedMoment = moment(mom).add(daysToDayOfWeek, <span class="hljs-string">'d'</span>);
        <span class="hljs-keyword">return</span> {
            week: <span class="hljs-built_in">Math</span>.ceil(adjustedMoment.dayOfYear() / <span class="hljs-number">7</span>),
            year: adjustedMoment.year()
        };
    }

    <span class="hljs-comment">//http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dayOfYearFromWeeks</span>(<span class="hljs-params">year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek</span>) </span>{
        <span class="hljs-keyword">var</span> d = makeUTCDate(year, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>).getUTCDay(), daysToAdd, dayOfYear;

        d = d === <span class="hljs-number">0</span> ? <span class="hljs-number">7</span> : d;
        weekday = weekday != <span class="hljs-literal">null</span> ? weekday : firstDayOfWeek;
        daysToAdd = firstDayOfWeek - d + (d &gt; firstDayOfWeekOfYear ? <span class="hljs-number">7</span> : <span class="hljs-number">0</span>) - (d &lt; firstDayOfWeek ? <span class="hljs-number">7</span> : <span class="hljs-number">0</span>);
        dayOfYear = <span class="hljs-number">7</span> * (week - <span class="hljs-number">1</span>) + (weekday - firstDayOfWeek) + daysToAdd + <span class="hljs-number">1</span>;

        <span class="hljs-keyword">return</span> {
            year: dayOfYear &gt; <span class="hljs-number">0</span> ? year : year - <span class="hljs-number">1</span>,
            dayOfYear: dayOfYear &gt; <span class="hljs-number">0</span> ?  dayOfYear : daysInYear(year - <span class="hljs-number">1</span>) + dayOfYear
        };
    }

    <span class="hljs-comment">/************************************
        Top Level Functions
    ************************************/</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeMoment</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> input = config._i,
            format = config._f,
            res;

        config._locale = config._locale || moment.localeData(config._l);

        <span class="hljs-keyword">if</span> (input === <span class="hljs-literal">null</span> || (format === <span class="hljs-literal">undefined</span> &amp;&amp; input === <span class="hljs-string">''</span>)) {
            <span class="hljs-keyword">return</span> moment.invalid({nullInput: <span class="hljs-literal">true</span>});
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
            config._i = input = config._locale.preparse(input);
        }

        <span class="hljs-keyword">if</span> (moment.isMoment(input)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Moment(input, <span class="hljs-literal">true</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (format) {
            <span class="hljs-keyword">if</span> (isArray(format)) {
                makeDateFromStringAndArray(config);
            } <span class="hljs-keyword">else</span> {
                makeDateFromStringAndFormat(config);
            }
        } <span class="hljs-keyword">else</span> {
            makeDateFromInput(config);
        }

        res = <span class="hljs-keyword">new</span> Moment(config);
        <span class="hljs-keyword">if</span> (res._nextDay) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Adding is smart enough around DST</p></div></div><div class="code"><div class="wrapper">            res.add(<span class="hljs-number">1</span>, <span class="hljs-string">'d'</span>);
            res._nextDay = <span class="hljs-literal">undefined</span>;
        }

        <span class="hljs-keyword">return</span> res;
    }

    moment = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, format, locale, strict</span>) </span>{
        <span class="hljs-keyword">var</span> c;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(locale) === <span class="hljs-string">'boolean'</span>) {
            strict = locale;
            locale = <span class="hljs-literal">undefined</span>;
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>object construction must be done this way.
<a href="https://github.com/moment/moment/issues/1423">https://github.com/moment/moment/issues/1423</a></p></div></div><div class="code"><div class="wrapper">        c = {};
        c._isAMomentObject = <span class="hljs-literal">true</span>;
        c._i = input;
        c._f = format;
        c._l = locale;
        c._strict = strict;
        c._isUTC = <span class="hljs-literal">false</span>;
        c._pf = defaultParsingFlags();

        <span class="hljs-keyword">return</span> makeMoment(c);
    };

    moment.suppressDeprecationWarnings = <span class="hljs-literal">false</span>;

    moment.createFromInputFallback = deprecate(
        <span class="hljs-string">'moment construction falls back to js Date. This is '</span> +
        <span class="hljs-string">'discouraged and will be removed in upcoming major '</span> +
        <span class="hljs-string">'release. Please refer to '</span> +
        <span class="hljs-string">'https://github.com/moment/moment/issues/1407 for more info.'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(config._i + (config._useUTC ? <span class="hljs-string">' UTC'</span> : <span class="hljs-string">''</span>));
        }
    );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Pick a moment m from moments so that m<a href="other">fn</a> is true for all
other. This relies on the function fn to be transitive.</p>
<p>moments should either be an array of moment objects or an array, whose
first element is an array of moment objects.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pickBy</span>(<span class="hljs-params">fn, moments</span>) </span>{
        <span class="hljs-keyword">var</span> res, i;
        <span class="hljs-keyword">if</span> (moments.length === <span class="hljs-number">1</span> &amp;&amp; isArray(moments[<span class="hljs-number">0</span>])) {
            moments = moments[<span class="hljs-number">0</span>];
        }
        <span class="hljs-keyword">if</span> (!moments.length) {
            <span class="hljs-keyword">return</span> moment();
        }
        res = moments[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; moments.length; ++i) {
            <span class="hljs-keyword">if</span> (moments[i][fn](res)) {
                res = moments[i];
            }
        }
        <span class="hljs-keyword">return</span> res;
    }

    moment.min = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>);

        <span class="hljs-keyword">return</span> pickBy(<span class="hljs-string">'isBefore'</span>, args);
    };

    moment.max = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>);

        <span class="hljs-keyword">return</span> pickBy(<span class="hljs-string">'isAfter'</span>, args);
    };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>creating with utc</p></div></div><div class="code"><div class="wrapper">    moment.utc = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, format, locale, strict</span>) </span>{
        <span class="hljs-keyword">var</span> c;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(locale) === <span class="hljs-string">'boolean'</span>) {
            strict = locale;
            locale = <span class="hljs-literal">undefined</span>;
        }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>object construction must be done this way.
<a href="https://github.com/moment/moment/issues/1423">https://github.com/moment/moment/issues/1423</a></p></div></div><div class="code"><div class="wrapper">        c = {};
        c._isAMomentObject = <span class="hljs-literal">true</span>;
        c._useUTC = <span class="hljs-literal">true</span>;
        c._isUTC = <span class="hljs-literal">true</span>;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;
        c._pf = defaultParsingFlags();

        <span class="hljs-keyword">return</span> makeMoment(c).utc();
    };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>creating with unix timestamp (in seconds)</p></div></div><div class="code"><div class="wrapper">    moment.unix = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> moment(input * <span class="hljs-number">1000</span>);
    };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>duration</p></div></div><div class="code"><div class="wrapper">    moment.duration = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, key</span>) </span>{
        <span class="hljs-keyword">var</span> duration = input,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>matching against regexp is expensive, do it on demand</p></div></div><div class="code"><div class="wrapper">            match = <span class="hljs-literal">null</span>,
            sign,
            ret,
            parseIso,
            diffRes;

        <span class="hljs-keyword">if</span> (moment.isDuration(input)) {
            duration = {
                ms: input._milliseconds,
                d: input._days,
                M: input._months
            };
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'number'</span>) {
            duration = {};
            <span class="hljs-keyword">if</span> (key) {
                duration[key] = input;
            } <span class="hljs-keyword">else</span> {
                duration.milliseconds = input;
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {
            sign = (match[<span class="hljs-number">1</span>] === <span class="hljs-string">'-'</span>) ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            duration = {
                y: <span class="hljs-number">0</span>,
                d: toInt(match[DATE]) * sign,
                h: toInt(match[HOUR]) * sign,
                m: toInt(match[MINUTE]) * sign,
                s: toInt(match[SECOND]) * sign,
                ms: toInt(match[MILLISECOND]) * sign
            };
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!!(match = isoDurationRegex.exec(input))) {
            sign = (match[<span class="hljs-number">1</span>] === <span class="hljs-string">'-'</span>) ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            parseIso = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">inp</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>We&#39;d normally use ~~inp for this, but unfortunately it also
converts floats to ints.
inp may be undefined, so careful calling replace on it.</p></div></div><div class="code"><div class="wrapper">                <span class="hljs-keyword">var</span> res = inp &amp;&amp; <span class="hljs-built_in">parseFloat</span>(inp.replace(<span class="hljs-string">','</span>, <span class="hljs-string">'.'</span>));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>apply sign while we&#39;re at it</p></div></div><div class="code"><div class="wrapper">                <span class="hljs-keyword">return</span> (<span class="hljs-built_in">isNaN</span>(res) ? <span class="hljs-number">0</span> : res) * sign;
            };
            duration = {
                y: parseIso(match[<span class="hljs-number">2</span>]),
                M: parseIso(match[<span class="hljs-number">3</span>]),
                d: parseIso(match[<span class="hljs-number">4</span>]),
                h: parseIso(match[<span class="hljs-number">5</span>]),
                m: parseIso(match[<span class="hljs-number">6</span>]),
                s: parseIso(match[<span class="hljs-number">7</span>]),
                w: parseIso(match[<span class="hljs-number">8</span>])
            };
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> duration === <span class="hljs-string">'object'</span> &amp;&amp;
                (<span class="hljs-string">'from'</span> <span class="hljs-keyword">in</span> duration || <span class="hljs-string">'to'</span> <span class="hljs-keyword">in</span> duration)) {
            diffRes = momentsDifference(moment(duration.from), moment(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = <span class="hljs-keyword">new</span> Duration(duration);

        <span class="hljs-keyword">if</span> (moment.isDuration(input) &amp;&amp; hasOwnProp(input, <span class="hljs-string">'_locale'</span>)) {
            ret._locale = input._locale;
        }

        <span class="hljs-keyword">return</span> ret;
    };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>version number</p></div></div><div class="code"><div class="wrapper">    moment.version = VERSION;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>default format</p></div></div><div class="code"><div class="wrapper">    moment.defaultFormat = isoFormat;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>constant that refers to the ISO standard</p></div></div><div class="code"><div class="wrapper">    moment.ISO_8601 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Plugins that add properties should also add the key here (null value),
so we can properly clone ourselves.</p></div></div><div class="code"><div class="wrapper">    moment.momentProperties = momentProperties;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This function will be called whenever a moment is mutated.
It is intended to keep the offset in sync with the timezone.</p></div></div><div class="code"><div class="wrapper">    moment.updateOffset = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This function allows you to set a threshold for relative time strings</p></div></div><div class="code"><div class="wrapper">    moment.relativeTimeThreshold = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">threshold, limit</span>) </span>{
        <span class="hljs-keyword">if</span> (relativeTimeThresholds[threshold] === <span class="hljs-literal">undefined</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span> (limit === <span class="hljs-literal">undefined</span>) {
            <span class="hljs-keyword">return</span> relativeTimeThresholds[threshold];
        }
        relativeTimeThresholds[threshold] = limit;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    };

    moment.lang = deprecate(
        <span class="hljs-string">'moment.lang is deprecated. Use moment.locale instead.'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, value</span>) </span>{
            <span class="hljs-keyword">return</span> moment.locale(key, value);
        }
    );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This function will load locale and then set the global locale.  If
no arguments are passed in, it will simply return the current global
locale key.</p></div></div><div class="code"><div class="wrapper">    moment.locale = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, values</span>) </span>{
        <span class="hljs-keyword">var</span> data;
        <span class="hljs-keyword">if</span> (key) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(values) !== <span class="hljs-string">'undefined'</span>) {
                data = moment.defineLocale(key, values);
            }
            <span class="hljs-keyword">else</span> {
                data = moment.localeData(key);
            }

            <span class="hljs-keyword">if</span> (data) {
                moment.duration._locale = moment._locale = data;
            }
        }

        <span class="hljs-keyword">return</span> moment._locale._abbr;
    };

    moment.defineLocale = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, values</span>) </span>{
        <span class="hljs-keyword">if</span> (values !== <span class="hljs-literal">null</span>) {
            values.abbr = name;
            <span class="hljs-keyword">if</span> (!locales[name]) {
                locales[name] = <span class="hljs-keyword">new</span> Locale();
            }
            locales[name].set(values);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>backwards compat for now: also set the locale</p></div></div><div class="code"><div class="wrapper">            moment.locale(name);

            <span class="hljs-keyword">return</span> locales[name];
        } <span class="hljs-keyword">else</span> {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>useful for testing</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">delete</span> locales[name];
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    };

    moment.langData = deprecate(
        <span class="hljs-string">'moment.langData is deprecated. Use moment.localeData instead.'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">return</span> moment.localeData(key);
        }
    );</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>returns locale data</p></div></div><div class="code"><div class="wrapper">    moment.localeData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">var</span> locale;

        <span class="hljs-keyword">if</span> (key &amp;&amp; key._locale &amp;&amp; key._locale._abbr) {
            key = key._locale._abbr;
        }

        <span class="hljs-keyword">if</span> (!key) {
            <span class="hljs-keyword">return</span> moment._locale;
        }

        <span class="hljs-keyword">if</span> (!isArray(key)) {
            <span class="hljs-comment">//short-circuit everything else</span>
            locale = loadLocale(key);
            <span class="hljs-keyword">if</span> (locale) {
                <span class="hljs-keyword">return</span> locale;
            }
            key = [key];
        }

        <span class="hljs-keyword">return</span> chooseLocale(key);
    };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>compare moment object</p></div></div><div class="code"><div class="wrapper">    moment.isMoment = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj <span class="hljs-keyword">instanceof</span> Moment ||
            (obj != <span class="hljs-literal">null</span> &amp;&amp; hasOwnProp(obj, <span class="hljs-string">'_isAMomentObject'</span>));
    };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>for typechecking Duration objects</p></div></div><div class="code"><div class="wrapper">    moment.isDuration = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj <span class="hljs-keyword">instanceof</span> Duration;
    };

    <span class="hljs-keyword">for</span> (i = lists.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) {
        makeList(lists[i]);
    }

    moment.normalizeUnits = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
        <span class="hljs-keyword">return</span> normalizeUnits(units);
    };

    moment.invalid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">flags</span>) </span>{
        <span class="hljs-keyword">var</span> m = moment.utc(<span class="hljs-literal">NaN</span>);
        <span class="hljs-keyword">if</span> (flags != <span class="hljs-literal">null</span>) {
            extend(m._pf, flags);
        }
        <span class="hljs-keyword">else</span> {
            m._pf.userInvalidated = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> m;
    };

    moment.parseZone = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> moment.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>).parseZone();
    };

    moment.parseTwoDigitYear = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> toInt(input) + (toInt(input) &gt; <span class="hljs-number">68</span> ? <span class="hljs-number">1900</span> : <span class="hljs-number">2000</span>);
    };

    <span class="hljs-comment">/************************************
        Moment Prototype
    ************************************/</span>


    extend(moment.fn = Moment.prototype, {

        clone : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> moment(<span class="hljs-keyword">this</span>);
        },

        valueOf : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>._d + ((<span class="hljs-keyword">this</span>._offset || <span class="hljs-number">0</span>) * <span class="hljs-number">60000</span>);
        },

        unix : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(+<span class="hljs-keyword">this</span> / <span class="hljs-number">1000</span>);
        },

        toString : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.clone().locale(<span class="hljs-string">'en'</span>).format(<span class="hljs-string">'ddd MMM DD YYYY HH:mm:ss [GMT]ZZ'</span>);
        },

        toDate : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._offset ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+<span class="hljs-keyword">this</span>) : <span class="hljs-keyword">this</span>._d;
        },

        toISOString : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> m = moment(<span class="hljs-keyword">this</span>).utc();
            <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt; m.year() &amp;&amp; m.year() &lt;= <span class="hljs-number">9999</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Date</span>.prototype.toISOString) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>native implementation is ~50x faster, use it when we can</p></div></div><div class="code"><div class="wrapper">                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toDate().toISOString();
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> formatMoment(m, <span class="hljs-string">'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]'</span>);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> formatMoment(m, <span class="hljs-string">'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'</span>);
            }
        },

        toArray : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> [
                m.year(),
                m.month(),
                m.date(),
                m.hours(),
                m.minutes(),
                m.seconds(),
                m.milliseconds()
            ];
        },

        isValid : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> isValid(<span class="hljs-keyword">this</span>);
        },

        isDSTShifted : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._a) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isValid() &amp;&amp; compareArrays(<span class="hljs-keyword">this</span>._a, (<span class="hljs-keyword">this</span>._isUTC ? moment.utc(<span class="hljs-keyword">this</span>._a) : moment(<span class="hljs-keyword">this</span>._a)).toArray()) &gt; <span class="hljs-number">0</span>;
            }

            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },

        parsingFlags : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> extend({}, <span class="hljs-keyword">this</span>._pf);
        },

        invalidAt: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._pf.overflow;
        },

        utc : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">keepLocalTime</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.zone(<span class="hljs-number">0</span>, keepLocalTime);
        },

        local : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">keepLocalTime</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isUTC) {
                <span class="hljs-keyword">this</span>.zone(<span class="hljs-number">0</span>, keepLocalTime);
                <span class="hljs-keyword">this</span>._isUTC = <span class="hljs-literal">false</span>;

                <span class="hljs-keyword">if</span> (keepLocalTime) {
                    <span class="hljs-keyword">this</span>.add(<span class="hljs-keyword">this</span>._dateTzOffset(), <span class="hljs-string">'m'</span>);
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        format : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">inputString</span>) </span>{
            <span class="hljs-keyword">var</span> output = formatMoment(<span class="hljs-keyword">this</span>, inputString || moment.defaultFormat);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().postformat(output);
        },

        add : createAdder(<span class="hljs-number">1</span>, <span class="hljs-string">'add'</span>),

        subtract : createAdder(-<span class="hljs-number">1</span>, <span class="hljs-string">'subtract'</span>),

        diff : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units, asFloat</span>) </span>{
            <span class="hljs-keyword">var</span> that = makeAs(input, <span class="hljs-keyword">this</span>),
                zoneDiff = (<span class="hljs-keyword">this</span>.zone() - that.zone()) * <span class="hljs-number">6e4</span>,
                diff, output, daysAdjust;

            units = normalizeUnits(units);

            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'year'</span> || units === <span class="hljs-string">'month'</span>) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>average number of days in the months in the given dates</p></div></div><div class="code"><div class="wrapper">                diff = (<span class="hljs-keyword">this</span>.daysInMonth() + that.daysInMonth()) * <span class="hljs-number">432e5</span>; <span class="hljs-comment">// 24 * 60 * 60 * 1000 / 2</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>difference in months</p></div></div><div class="code"><div class="wrapper">                output = ((<span class="hljs-keyword">this</span>.year() - that.year()) * <span class="hljs-number">12</span>) + (<span class="hljs-keyword">this</span>.month() - that.month());</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>adjust by taking difference in days, average number of days
and dst in the given months.</p></div></div><div class="code"><div class="wrapper">                daysAdjust = (<span class="hljs-keyword">this</span> - moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'month'</span>)) -
                    (that - moment(that).startOf(<span class="hljs-string">'month'</span>));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>same as above but with zones, to negate all dst</p></div></div><div class="code"><div class="wrapper">                daysAdjust -= ((<span class="hljs-keyword">this</span>.zone() - moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'month'</span>).zone()) -
                        (that.zone() - moment(that).startOf(<span class="hljs-string">'month'</span>).zone())) * <span class="hljs-number">6e4</span>;
                output += daysAdjust / diff;
                <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'year'</span>) {
                    output = output / <span class="hljs-number">12</span>;
                }
            } <span class="hljs-keyword">else</span> {
                diff = (<span class="hljs-keyword">this</span> - that);
                output = units === <span class="hljs-string">'second'</span> ? diff / <span class="hljs-number">1e3</span> : <span class="hljs-comment">// 1000</span>
                    units === <span class="hljs-string">'minute'</span> ? diff / <span class="hljs-number">6e4</span> : <span class="hljs-comment">// 1000 * 60</span>
                    units === <span class="hljs-string">'hour'</span> ? diff / <span class="hljs-number">36e5</span> : <span class="hljs-comment">// 1000 * 60 * 60</span>
                    units === <span class="hljs-string">'day'</span> ? (diff - zoneDiff) / <span class="hljs-number">864e5</span> : <span class="hljs-comment">// 1000 * 60 * 60 * 24, negate dst</span>
                    units === <span class="hljs-string">'week'</span> ? (diff - zoneDiff) / <span class="hljs-number">6048e5</span> : <span class="hljs-comment">// 1000 * 60 * 60 * 24 * 7, negate dst</span>
                    diff;
            }
            <span class="hljs-keyword">return</span> asFloat ? output : absRound(output);
        },

        from : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">time, withoutSuffix</span>) </span>{
            <span class="hljs-keyword">return</span> moment.duration({to: <span class="hljs-keyword">this</span>, from: time}).locale(<span class="hljs-keyword">this</span>.locale()).humanize(!withoutSuffix);
        },

        fromNow : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">withoutSuffix</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.from(moment(), withoutSuffix);
        },

        calendar : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">time</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>We want to compare the start of today, vs this.
Getting start-of-today depends on whether we&#39;re zone&#39;d or not.</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">var</span> now = time || moment(),
                sod = makeAs(now, <span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'day'</span>),
                diff = <span class="hljs-keyword">this</span>.diff(sod, <span class="hljs-string">'days'</span>, <span class="hljs-literal">true</span>),
                format = diff &lt; -<span class="hljs-number">6</span> ? <span class="hljs-string">'sameElse'</span> :
                    diff &lt; -<span class="hljs-number">1</span> ? <span class="hljs-string">'lastWeek'</span> :
                    diff &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">'lastDay'</span> :
                    diff &lt; <span class="hljs-number">1</span> ? <span class="hljs-string">'sameDay'</span> :
                    diff &lt; <span class="hljs-number">2</span> ? <span class="hljs-string">'nextDay'</span> :
                    diff &lt; <span class="hljs-number">7</span> ? <span class="hljs-string">'nextWeek'</span> : <span class="hljs-string">'sameElse'</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.format(<span class="hljs-keyword">this</span>.localeData().calendar(format, <span class="hljs-keyword">this</span>, moment(now)));
        },

        isLeapYear : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> isLeapYear(<span class="hljs-keyword">this</span>.year());
        },

        isDST : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.zone() &lt; <span class="hljs-keyword">this</span>.clone().month(<span class="hljs-number">0</span>).zone() ||
                <span class="hljs-keyword">this</span>.zone() &lt; <span class="hljs-keyword">this</span>.clone().month(<span class="hljs-number">5</span>).zone());
        },

        day : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> day = <span class="hljs-keyword">this</span>._isUTC ? <span class="hljs-keyword">this</span>._d.getUTCDay() : <span class="hljs-keyword">this</span>._d.getDay();
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                input = parseWeekday(input, <span class="hljs-keyword">this</span>.localeData());
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.add(input - day, <span class="hljs-string">'d'</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> day;
            }
        },

        month : makeAccessor(<span class="hljs-string">'Month'</span>, <span class="hljs-literal">true</span>),

        startOf : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>the following switch intentionally omits break keywords
to utilize falling through the cases.</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">switch</span> (units) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'year'</span>:
                <span class="hljs-keyword">this</span>.month(<span class="hljs-number">0</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">case</span> <span class="hljs-string">'quarter'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'month'</span>:
                <span class="hljs-keyword">this</span>.date(<span class="hljs-number">1</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">case</span> <span class="hljs-string">'week'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'isoWeek'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'day'</span>:
                <span class="hljs-keyword">this</span>.hours(<span class="hljs-number">0</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">case</span> <span class="hljs-string">'hour'</span>:
                <span class="hljs-keyword">this</span>.minutes(<span class="hljs-number">0</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">case</span> <span class="hljs-string">'minute'</span>:
                <span class="hljs-keyword">this</span>.seconds(<span class="hljs-number">0</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">case</span> <span class="hljs-string">'second'</span>:
                <span class="hljs-keyword">this</span>.milliseconds(<span class="hljs-number">0</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>falls through </p></div></div><div class="code"><div class="wrapper">            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>weeks are a special case</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'week'</span>) {
                <span class="hljs-keyword">this</span>.weekday(<span class="hljs-number">0</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'isoWeek'</span>) {
                <span class="hljs-keyword">this</span>.isoWeekday(<span class="hljs-number">1</span>);
            }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>quarters are also special</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'quarter'</span>) {
                <span class="hljs-keyword">this</span>.month(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-keyword">this</span>.month() / <span class="hljs-number">3</span>) * <span class="hljs-number">3</span>);
            }

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        endOf: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">if</span> (units === <span class="hljs-literal">undefined</span> || units === <span class="hljs-string">'millisecond'</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.startOf(units).add(<span class="hljs-number">1</span>, (units === <span class="hljs-string">'isoWeek'</span> ? <span class="hljs-string">'week'</span> : units)).subtract(<span class="hljs-number">1</span>, <span class="hljs-string">'ms'</span>);
        },

        isAfter: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units</span>) </span>{
            <span class="hljs-keyword">var</span> inputMs;
            units = normalizeUnits(<span class="hljs-keyword">typeof</span> units !== <span class="hljs-string">'undefined'</span> ? units : <span class="hljs-string">'millisecond'</span>);
            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'millisecond'</span>) {
                input = moment.isMoment(input) ? input : moment(input);
                <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span> &gt; +input;
            } <span class="hljs-keyword">else</span> {
                inputMs = moment.isMoment(input) ? +input : +moment(input);
                <span class="hljs-keyword">return</span> inputMs &lt; +<span class="hljs-keyword">this</span>.clone().startOf(units);
            }
        },

        isBefore: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units</span>) </span>{
            <span class="hljs-keyword">var</span> inputMs;
            units = normalizeUnits(<span class="hljs-keyword">typeof</span> units !== <span class="hljs-string">'undefined'</span> ? units : <span class="hljs-string">'millisecond'</span>);
            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'millisecond'</span>) {
                input = moment.isMoment(input) ? input : moment(input);
                <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span> &lt; +input;
            } <span class="hljs-keyword">else</span> {
                inputMs = moment.isMoment(input) ? +input : +moment(input);
                <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>.clone().endOf(units) &lt; inputMs;
            }
        },

        isSame: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units</span>) </span>{
            <span class="hljs-keyword">var</span> inputMs;
            units = normalizeUnits(units || <span class="hljs-string">'millisecond'</span>);
            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'millisecond'</span>) {
                input = moment.isMoment(input) ? input : moment(input);
                <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span> === +input;
            } <span class="hljs-keyword">else</span> {
                inputMs = +moment(input);
                <span class="hljs-keyword">return</span> +(<span class="hljs-keyword">this</span>.clone().startOf(units)) &lt;= inputMs &amp;&amp; inputMs &lt;= +(<span class="hljs-keyword">this</span>.clone().endOf(units));
            }
        },

        min: deprecate(
                 <span class="hljs-string">'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548'</span>,
                 <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
                     other = moment.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
                     <span class="hljs-keyword">return</span> other &lt; <span class="hljs-keyword">this</span> ? <span class="hljs-keyword">this</span> : other;
                 }
         ),

        max: deprecate(
                <span class="hljs-string">'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548'</span>,
                <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
                    other = moment.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
                    <span class="hljs-keyword">return</span> other &gt; <span class="hljs-keyword">this</span> ? <span class="hljs-keyword">this</span> : other;
                }
        ),</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>keepLocalTime = true means only change the timezone, without
affecting the local hour. So 5:31:26 +0300 --[zone(2, true)]--&gt;
5:31:26 +0200 It is possible that 5:31:26 doesn&#39;t exist int zone
+0200, so we adjust the time as needed, to be valid.</p>
<p>Keeping the time actually adds/subtracts (one hour)
from the actual represented time. That is why we call updateOffset
a second time. In case it wants us to change the offset again
_changeInProgress == true case, then we have to adjust, because
there is no such time in the given timezone.</p></div></div><div class="code"><div class="wrapper">        zone : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, keepLocalTime</span>) </span>{
            <span class="hljs-keyword">var</span> offset = <span class="hljs-keyword">this</span>._offset || <span class="hljs-number">0</span>,
                localAdjust;
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
                    input = timezoneMinutesFromString(input);
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(input) &lt; <span class="hljs-number">16</span>) {
                    input = input * <span class="hljs-number">60</span>;
                }
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isUTC &amp;&amp; keepLocalTime) {
                    localAdjust = <span class="hljs-keyword">this</span>._dateTzOffset();
                }
                <span class="hljs-keyword">this</span>._offset = input;
                <span class="hljs-keyword">this</span>._isUTC = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (localAdjust != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">this</span>.subtract(localAdjust, <span class="hljs-string">'m'</span>);
                }
                <span class="hljs-keyword">if</span> (offset !== input) {
                    <span class="hljs-keyword">if</span> (!keepLocalTime || <span class="hljs-keyword">this</span>._changeInProgress) {
                        addOrSubtractDurationFromMoment(<span class="hljs-keyword">this</span>,
                                moment.duration(offset - input, <span class="hljs-string">'m'</span>), <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._changeInProgress) {
                        <span class="hljs-keyword">this</span>._changeInProgress = <span class="hljs-literal">true</span>;
                        moment.updateOffset(<span class="hljs-keyword">this</span>, <span class="hljs-literal">true</span>);
                        <span class="hljs-keyword">this</span>._changeInProgress = <span class="hljs-literal">null</span>;
                    }
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isUTC ? offset : <span class="hljs-keyword">this</span>._dateTzOffset();
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        zoneAbbr : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>;
        },

        zoneName : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isUTC ? <span class="hljs-string">'Coordinated Universal Time'</span> : <span class="hljs-string">''</span>;
        },

        parseZone : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._tzm) {
                <span class="hljs-keyword">this</span>.zone(<span class="hljs-keyword">this</span>._tzm);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>._i === <span class="hljs-string">'string'</span>) {
                <span class="hljs-keyword">this</span>.zone(<span class="hljs-keyword">this</span>._i);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        hasAlignedHourOffset : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">if</span> (!input) {
                input = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">else</span> {
                input = moment(input).zone();
            }

            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.zone() - input) % <span class="hljs-number">60</span> === <span class="hljs-number">0</span>;
        },

        daysInMonth : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> daysInMonth(<span class="hljs-keyword">this</span>.year(), <span class="hljs-keyword">this</span>.month());
        },

        dayOfYear : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> dayOfYear = round((moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'day'</span>) - moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'year'</span>)) / <span class="hljs-number">864e5</span>) + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? dayOfYear : <span class="hljs-keyword">this</span>.add((input - dayOfYear), <span class="hljs-string">'d'</span>);
        },

        quarter : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? <span class="hljs-built_in">Math</span>.ceil((<span class="hljs-keyword">this</span>.month() + <span class="hljs-number">1</span>) / <span class="hljs-number">3</span>) : <span class="hljs-keyword">this</span>.month((input - <span class="hljs-number">1</span>) * <span class="hljs-number">3</span> + <span class="hljs-keyword">this</span>.month() % <span class="hljs-number">3</span>);
        },

        weekYear : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> year = weekOfYear(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.localeData()._week.dow, <span class="hljs-keyword">this</span>.localeData()._week.doy).year;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? year : <span class="hljs-keyword">this</span>.add((input - year), <span class="hljs-string">'y'</span>);
        },

        isoWeekYear : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> year = weekOfYear(<span class="hljs-keyword">this</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>).year;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? year : <span class="hljs-keyword">this</span>.add((input - year), <span class="hljs-string">'y'</span>);
        },

        week : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> week = <span class="hljs-keyword">this</span>.localeData().week(<span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? week : <span class="hljs-keyword">this</span>.add((input - week) * <span class="hljs-number">7</span>, <span class="hljs-string">'d'</span>);
        },

        isoWeek : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> week = weekOfYear(<span class="hljs-keyword">this</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>).week;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? week : <span class="hljs-keyword">this</span>.add((input - week) * <span class="hljs-number">7</span>, <span class="hljs-string">'d'</span>);
        },

        weekday : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> weekday = (<span class="hljs-keyword">this</span>.day() + <span class="hljs-number">7</span> - <span class="hljs-keyword">this</span>.localeData()._week.dow) % <span class="hljs-number">7</span>;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? weekday : <span class="hljs-keyword">this</span>.add(input - weekday, <span class="hljs-string">'d'</span>);
        },

        isoWeekday : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>behaves the same as moment#day except
as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
as a setter, sunday should belong to the previous week.</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">this</span>.day() || <span class="hljs-number">7</span> : <span class="hljs-keyword">this</span>.day(<span class="hljs-keyword">this</span>.day() % <span class="hljs-number">7</span> ? input : input - <span class="hljs-number">7</span>);
        },

        isoWeeksInYear : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> weeksInYear(<span class="hljs-keyword">this</span>.year(), <span class="hljs-number">1</span>, <span class="hljs-number">4</span>);
        },

        weeksInYear : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> weekInfo = <span class="hljs-keyword">this</span>.localeData()._week;
            <span class="hljs-keyword">return</span> weeksInYear(<span class="hljs-keyword">this</span>.year(), weekInfo.dow, weekInfo.doy);
        },

        get : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[units]();
        },

        set : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units, value</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>[units] === <span class="hljs-string">'function'</span>) {
                <span class="hljs-keyword">this</span>[units](value);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>If passed a locale key, it will set the locale for this
instance.  Otherwise, it will return the locale configuration
variables for this instance.</p></div></div><div class="code"><div class="wrapper">        locale : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">var</span> newLocaleData;

            <span class="hljs-keyword">if</span> (key === <span class="hljs-literal">undefined</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._locale._abbr;
            } <span class="hljs-keyword">else</span> {
                newLocaleData = moment.localeData(key);
                <span class="hljs-keyword">if</span> (newLocaleData != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">this</span>._locale = newLocaleData;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
        },

        lang : deprecate(
            <span class="hljs-string">'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                <span class="hljs-keyword">if</span> (key === <span class="hljs-literal">undefined</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData();
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.locale(key);
                }
            }
        ),

        localeData : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._locale;
        },

        _dateTzOffset : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>On Firefox.24 Date#getTimezoneOffset returns a floating point.
<a href="https://github.com/moment/moment/pull/1871">https://github.com/moment/moment/pull/1871</a></p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">this</span>._d.getTimezoneOffset() / <span class="hljs-number">15</span>) * <span class="hljs-number">15</span>;
        }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawMonthSetter</span>(<span class="hljs-params">mom, value</span>) </span>{
        <span class="hljs-keyword">var</span> dayOfMonth;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO: Move this out of here!</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span>) {
            value = mom.localeData().monthsParse(value);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>TODO: Another silent failure?</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'number'</span>) {
                <span class="hljs-keyword">return</span> mom;
            }
        }

        dayOfMonth = <span class="hljs-built_in">Math</span>.min(mom.date(),
                daysInMonth(mom.year(), value));
        mom._d[<span class="hljs-string">'set'</span> + (mom._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>) + <span class="hljs-string">'Month'</span>](value, dayOfMonth);
        <span class="hljs-keyword">return</span> mom;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawGetter</span>(<span class="hljs-params">mom, unit</span>) </span>{
        <span class="hljs-keyword">return</span> mom._d[<span class="hljs-string">'get'</span> + (mom._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>) + unit]();
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawSetter</span>(<span class="hljs-params">mom, unit, value</span>) </span>{
        <span class="hljs-keyword">if</span> (unit === <span class="hljs-string">'Month'</span>) {
            <span class="hljs-keyword">return</span> rawMonthSetter(mom, value);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> mom._d[<span class="hljs-string">'set'</span> + (mom._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>) + unit](value);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeAccessor</span>(<span class="hljs-params">unit, keepTime</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                rawSetter(<span class="hljs-keyword">this</span>, unit, value);
                moment.updateOffset(<span class="hljs-keyword">this</span>, keepTime);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> rawGetter(<span class="hljs-keyword">this</span>, unit);
            }
        };
    }

    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor(<span class="hljs-string">'Milliseconds'</span>, <span class="hljs-literal">false</span>);
    moment.fn.second = moment.fn.seconds = makeAccessor(<span class="hljs-string">'Seconds'</span>, <span class="hljs-literal">false</span>);
    moment.fn.minute = moment.fn.minutes = makeAccessor(<span class="hljs-string">'Minutes'</span>, <span class="hljs-literal">false</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Setting the hour should keep the time, because the user explicitly
specified which hour he wants. So trying to maintain the same hour (in
a new timezone) makes sense. Adding/subtracting hours does not follow
this rule.</p></div></div><div class="code"><div class="wrapper">    moment.fn.hour = moment.fn.hours = makeAccessor(<span class="hljs-string">'Hours'</span>, <span class="hljs-literal">true</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>moment.fn.month is defined separately</p></div></div><div class="code"><div class="wrapper">    moment.fn.date = makeAccessor(<span class="hljs-string">'Date'</span>, <span class="hljs-literal">true</span>);
    moment.fn.dates = deprecate(<span class="hljs-string">'dates accessor is deprecated. Use date instead.'</span>, makeAccessor(<span class="hljs-string">'Date'</span>, <span class="hljs-literal">true</span>));
    moment.fn.year = makeAccessor(<span class="hljs-string">'FullYear'</span>, <span class="hljs-literal">true</span>);
    moment.fn.years = deprecate(<span class="hljs-string">'years accessor is deprecated. Use year instead.'</span>, makeAccessor(<span class="hljs-string">'FullYear'</span>, <span class="hljs-literal">true</span>));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>add plural methods</p></div></div><div class="code"><div class="wrapper">    moment.fn.days = moment.fn.day;
    moment.fn.months = moment.fn.month;
    moment.fn.weeks = moment.fn.week;
    moment.fn.isoWeeks = moment.fn.isoWeek;
    moment.fn.quarters = moment.fn.quarter;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>add aliased format methods</p></div></div><div class="code"><div class="wrapper">    moment.fn.toJSON = moment.fn.toISOString;

    <span class="hljs-comment">/************************************
        Duration Prototype
    ************************************/</span>


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">daysToYears</span> (<span class="hljs-params">days</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>400 years have 146097 days (taking into account leap year rules)</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">return</span> days * <span class="hljs-number">400</span> / <span class="hljs-number">146097</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">yearsToDays</span> (<span class="hljs-params">years</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>years * 365 + absRound(years / 4) -
    absRound(years / 100) + absRound(years / 400);</p></div></div><div class="code"><div class="wrapper">        <span class="hljs-keyword">return</span> years * <span class="hljs-number">146097</span> / <span class="hljs-number">400</span>;
    }

    extend(moment.duration.fn = Duration.prototype, {

        _bubble : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> milliseconds = <span class="hljs-keyword">this</span>._milliseconds,
                days = <span class="hljs-keyword">this</span>._days,
                months = <span class="hljs-keyword">this</span>._months,
                data = <span class="hljs-keyword">this</span>._data,
                seconds, minutes, hours, years = <span class="hljs-number">0</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The following code bubbles up values, see the tests for
examples of what that means.</p></div></div><div class="code"><div class="wrapper">            data.milliseconds = milliseconds % <span class="hljs-number">1000</span>;

            seconds = absRound(milliseconds / <span class="hljs-number">1000</span>);
            data.seconds = seconds % <span class="hljs-number">60</span>;

            minutes = absRound(seconds / <span class="hljs-number">60</span>);
            data.minutes = minutes % <span class="hljs-number">60</span>;

            hours = absRound(minutes / <span class="hljs-number">60</span>);
            data.hours = hours % <span class="hljs-number">24</span>;

            days += absRound(hours / <span class="hljs-number">24</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Accurately convert days to years, assume start from year 0.</p></div></div><div class="code"><div class="wrapper">            years = absRound(daysToYears(days));
            days -= absRound(yearsToDays(years));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>30 days to a month
TODO (iskren): Use anchor date (like 1st Jan) to compute this.</p></div></div><div class="code"><div class="wrapper">            months += absRound(days / <span class="hljs-number">30</span>);
            days %= <span class="hljs-number">30</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>12 months -&gt; 1 year</p></div></div><div class="code"><div class="wrapper">            years += absRound(months / <span class="hljs-number">12</span>);
            months %= <span class="hljs-number">12</span>;

            data.days = days;
            data.months = months;
            data.years = years;
        },

        abs : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">this</span>._milliseconds = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._milliseconds);
            <span class="hljs-keyword">this</span>._days = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._days);
            <span class="hljs-keyword">this</span>._months = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._months);

            <span class="hljs-keyword">this</span>._data.milliseconds = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._data.milliseconds);
            <span class="hljs-keyword">this</span>._data.seconds = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._data.seconds);
            <span class="hljs-keyword">this</span>._data.minutes = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._data.minutes);
            <span class="hljs-keyword">this</span>._data.hours = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._data.hours);
            <span class="hljs-keyword">this</span>._data.months = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._data.months);
            <span class="hljs-keyword">this</span>._data.years = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._data.years);

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        weeks : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> absRound(<span class="hljs-keyword">this</span>.days() / <span class="hljs-number">7</span>);
        },

        valueOf : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._milliseconds +
              <span class="hljs-keyword">this</span>._days * <span class="hljs-number">864e5</span> +
              (<span class="hljs-keyword">this</span>._months % <span class="hljs-number">12</span>) * <span class="hljs-number">2592e6</span> +
              toInt(<span class="hljs-keyword">this</span>._months / <span class="hljs-number">12</span>) * <span class="hljs-number">31536e6</span>;
        },

        humanize : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">withSuffix</span>) </span>{
            <span class="hljs-keyword">var</span> output = relativeTime(<span class="hljs-keyword">this</span>, !withSuffix, <span class="hljs-keyword">this</span>.localeData());

            <span class="hljs-keyword">if</span> (withSuffix) {
                output = <span class="hljs-keyword">this</span>.localeData().pastFuture(+<span class="hljs-keyword">this</span>, output);
            }

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.localeData().postformat(output);
        },

        add : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, val</span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>supports only 2.0-style add(1, &#39;s&#39;) or add(moment)</p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">var</span> dur = moment.duration(input, val);

            <span class="hljs-keyword">this</span>._milliseconds += dur._milliseconds;
            <span class="hljs-keyword">this</span>._days += dur._days;
            <span class="hljs-keyword">this</span>._months += dur._months;

            <span class="hljs-keyword">this</span>._bubble();

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        subtract : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, val</span>) </span>{
            <span class="hljs-keyword">var</span> dur = moment.duration(input, val);

            <span class="hljs-keyword">this</span>._milliseconds -= dur._milliseconds;
            <span class="hljs-keyword">this</span>._days -= dur._days;
            <span class="hljs-keyword">this</span>._months -= dur._months;

            <span class="hljs-keyword">this</span>._bubble();

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        get : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[units.toLowerCase() + <span class="hljs-string">'s'</span>]();
        },

        <span class="hljs-keyword">as</span> : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            <span class="hljs-keyword">var</span> days, months;
            units = normalizeUnits(units);

            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'month'</span> || units === <span class="hljs-string">'year'</span>) {
                days = <span class="hljs-keyword">this</span>._days + <span class="hljs-keyword">this</span>._milliseconds / <span class="hljs-number">864e5</span>;
                months = <span class="hljs-keyword">this</span>._months + daysToYears(days) * <span class="hljs-number">12</span>;
                <span class="hljs-keyword">return</span> units === <span class="hljs-string">'month'</span> ? months : months / <span class="hljs-number">12</span>;
            } <span class="hljs-keyword">else</span> {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>handle milliseconds separately because of floating point math errors (issue #1867)</p></div></div><div class="code"><div class="wrapper">                days = <span class="hljs-keyword">this</span>._days + <span class="hljs-built_in">Math</span>.round(yearsToDays(<span class="hljs-keyword">this</span>._months / <span class="hljs-number">12</span>));
                <span class="hljs-keyword">switch</span> (units) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'week'</span>: <span class="hljs-keyword">return</span> days / <span class="hljs-number">7</span> + <span class="hljs-keyword">this</span>._milliseconds / <span class="hljs-number">6048e5</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'day'</span>: <span class="hljs-keyword">return</span> days + <span class="hljs-keyword">this</span>._milliseconds / <span class="hljs-number">864e5</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'hour'</span>: <span class="hljs-keyword">return</span> days * <span class="hljs-number">24</span> + <span class="hljs-keyword">this</span>._milliseconds / <span class="hljs-number">36e5</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'minute'</span>: <span class="hljs-keyword">return</span> days * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> + <span class="hljs-keyword">this</span>._milliseconds / <span class="hljs-number">6e4</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'second'</span>: <span class="hljs-keyword">return</span> days * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> + <span class="hljs-keyword">this</span>._milliseconds / <span class="hljs-number">1000</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Math.floor prevents floating point math errors here</p></div></div><div class="code"><div class="wrapper">                    <span class="hljs-keyword">case</span> <span class="hljs-string">'millisecond'</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(days * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) + <span class="hljs-keyword">this</span>._milliseconds;
                    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unknown unit '</span> + units);
                }
            }
        },

        lang : moment.fn.lang,
        locale : moment.fn.locale,

        toIsoString : deprecate(
            <span class="hljs-string">'toIsoString() is deprecated. Please use toISOString() instead '</span> +
            <span class="hljs-string">'(notice the capitals)'</span>,
            <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toISOString();
            }
        ),

        toISOString : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>inspired by <a href="https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js">https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js</a></p></div></div><div class="code"><div class="wrapper">            <span class="hljs-keyword">var</span> years = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.years()),
                months = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.months()),
                days = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.days()),
                hours = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.hours()),
                minutes = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.minutes()),
                seconds = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.seconds() + <span class="hljs-keyword">this</span>.milliseconds() / <span class="hljs-number">1000</span>);

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.asSeconds()) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>this is the same as C#&#39;s (Noda) and python (isodate)...
but not other JS (goog.date)</p></div></div><div class="code"><div class="wrapper">                <span class="hljs-keyword">return</span> <span class="hljs-string">'P0D'</span>;
            }

            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.asSeconds() &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">'-'</span> : <span class="hljs-string">''</span>) +
                <span class="hljs-string">'P'</span> +
                (years ? years + <span class="hljs-string">'Y'</span> : <span class="hljs-string">''</span>) +
                (months ? months + <span class="hljs-string">'M'</span> : <span class="hljs-string">''</span>) +
                (days ? days + <span class="hljs-string">'D'</span> : <span class="hljs-string">''</span>) +
                ((hours || minutes || seconds) ? <span class="hljs-string">'T'</span> : <span class="hljs-string">''</span>) +
                (hours ? hours + <span class="hljs-string">'H'</span> : <span class="hljs-string">''</span>) +
                (minutes ? minutes + <span class="hljs-string">'M'</span> : <span class="hljs-string">''</span>) +
                (seconds ? seconds + <span class="hljs-string">'S'</span> : <span class="hljs-string">''</span>);
        },

        localeData : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._locale;
        }
    });

    moment.duration.fn.toString = moment.duration.fn.toISOString;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDurationGetter</span>(<span class="hljs-params">name</span>) </span>{
        moment.duration.fn[name] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._data[name];
        };
    }

    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> unitMillisecondFactors) {
        <span class="hljs-keyword">if</span> (hasOwnProp(unitMillisecondFactors, i)) {
            makeDurationGetter(i.toLowerCase());
        }
    }

    moment.duration.fn.asMilliseconds = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'ms'</span>);
    };
    moment.duration.fn.asSeconds = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'s'</span>);
    };
    moment.duration.fn.asMinutes = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'m'</span>);
    };
    moment.duration.fn.asHours = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'h'</span>);
    };
    moment.duration.fn.asDays = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'d'</span>);
    };
    moment.duration.fn.asWeeks = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'weeks'</span>);
    };
    moment.duration.fn.asMonths = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'M'</span>);
    };
    moment.duration.fn.asYears = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.as(<span class="hljs-string">'y'</span>);
    };

    <span class="hljs-comment">/************************************
        Default Locale
    ************************************/</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Set default locale, other locale will inherit from English.</p></div></div><div class="code"><div class="wrapper">    moment.locale(<span class="hljs-string">'en'</span>, {
        ordinalParse: <span class="hljs-regexp">/\d{1,2}(th|st|nd|rd)/</span>,
        ordinal : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
            <span class="hljs-keyword">var</span> b = number % <span class="hljs-number">10</span>,
                output = (toInt(number % <span class="hljs-number">100</span> / <span class="hljs-number">10</span>) === <span class="hljs-number">1</span>) ? <span class="hljs-string">'th'</span> :
                (b === <span class="hljs-number">1</span>) ? <span class="hljs-string">'st'</span> :
                (b === <span class="hljs-number">2</span>) ? <span class="hljs-string">'nd'</span> :
                (b === <span class="hljs-number">3</span>) ? <span class="hljs-string">'rd'</span> : <span class="hljs-string">'th'</span>;
            <span class="hljs-keyword">return</span> number + output;
        }
    });</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>EMBED_LOCALES </p></div></div><div class="code"><div class="wrapper">    <span class="hljs-comment">/************************************
        Exposing Moment
    ************************************/</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeGlobal</span>(<span class="hljs-params">shouldDeprecate</span>) </span>{
        <span class="hljs-comment">/*global ender:false */</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> ender !== <span class="hljs-string">'undefined'</span>) {
            <span class="hljs-keyword">return</span>;
        }
        oldGlobalMoment = globalScope.moment;
        <span class="hljs-keyword">if</span> (shouldDeprecate) {
            globalScope.moment = deprecate(
                    <span class="hljs-string">'Accessing Moment through the global scope is '</span> +
                    <span class="hljs-string">'deprecated, and will be removed in an upcoming '</span> +
                    <span class="hljs-string">'release.'</span>,
                    moment);
        } <span class="hljs-keyword">else</span> {
            globalScope.moment = moment;
        }
    }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>CommonJS module is defined</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">if</span> (hasModule) {
        <span class="hljs-built_in">module</span>.exports = moment;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {
        define(<span class="hljs-string">'moment'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">require, exports, module</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.config &amp;&amp; <span class="hljs-built_in">module</span>.config() &amp;&amp; <span class="hljs-built_in">module</span>.config().noGlobal === <span class="hljs-literal">true</span>) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>release the global variable</p></div></div><div class="code"><div class="wrapper">                globalScope.moment = oldGlobalMoment;
            }

            <span class="hljs-keyword">return</span> moment;
        });
        makeGlobal(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">else</span> {
        makeGlobal();
    }
}).call(<span class="hljs-keyword">this</span>);</div></div></div></div></body></html>