<!DOCTYPE html><html lang="en"><head><title>index</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="index"><meta name="groc-project-path" content="README.md"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">README.md</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="the-fabmo-engine">The FabMo Engine</h1>
<p>The FabMo engine is host software that connects to a G2 motion control platform and manages it, exposing a web interface.  The engine serves the following major functions:</p>
<ul>
<li>Streaming of G-Code files to G2</li>
<li>Monitoring of G2 motion state and cycle progress</li>
<li>Storage and management of files (that currently cannot be stored on G2)</li>
<li>Interpretation of the OpenSBP (ShopBot) language</li>
<li>Hosting of the &quot;FabMo Dashboard&quot; a web frontend to the FabMo Engine that provides an app hosting environment</li>
</ul>
<h2 id="documentation">Documentation</h2>
<p><a href="http://fabmo.github.io/FabMo-Engine/">Source Code Documentation</a></p>
<p><a href="http://fabmo.github.io/FabMo-Engine/api">API Documentation</a></p>
<h2 id="quick-start">Quick Start</h2>
<ol>
<li>Install nodejs - The officially supported version is v0.12.7  - Newer versions <em>do not work at this time</em></li>
<li>Check out the source code <a href="https://github.com/ShopBotTools/FabMo-Engine.git">https://github.com/ShopBotTools/FabMo-Engine.git</a></li>
<li>From inside the source directory, install all of the engine dependencies with <code>npm install</code></li>
<li>Create the engine data directory at <code>/opt/fabmo</code> or <code>C:\opt\fabmo</code> if you&#39;re on windows.  Set the permissions on this directory so that the user running the engine can read/write to it.</li>
<li>Start the engine with <code>npm run debug</code> for development mode or <code>npm start</code> for production mode.</li>
<li>On Windows it is unlikely that the default COM port settings are satisfactory.  After running the engine once, edit <code>C:\fabmo\config\engine.json</code> and set the two COM ports for your platform with the appropriate values for your system.</li>
</ol>
<p><strong> Note that you should not need to run the engine as a privileged user.  If you have to run your engine using <code>sudo</code> check your node installation and the permissions settings for the /opt/fabmo directory </strong></p>
<p>When the engine starts, it will connect to G2 and setup an http server to accept connections on port 80.  Once the engine is running you can visit <a href="http://localhost/"><a href="http://localhost/">http://localhost/</a></a> to use the fabmo dashboard.</p>
<h2 id="installing-the-engine">Installing the Engine</h2>
<p>The engine is run from source, and only needs to be checked out and stored in a local directory.  Run <code>npm install</code> from the source directory to install the needed dependencies.</p>
<h3 id="on-the-intel-edison">On the Intel Edison</h3>
<p><img src="/doc/intel_edison.jpg" alt="Intel Edison"></p>
<p>To install the engine in the &quot;standard&quot; location on the Intel Edison, perform the following steps.</p>
<ol>
<li>Checkout the source into <code>/fabmo</code> with <code>git clone https://github.com/FabMo/FabMo-Engine /fabmo</code></li>
<li>Install dependencies using npm: <code>cd /fabmo; npm install</code></li>
<li>Install the systemd service file <code>cp /fabmo/files/fabmo.service /etc/systemd/system</code></li>
<li>Set the appropriate permissions on the service file <code>chmod 0775 /etc/systemd/system/fabmo.service</code></li>
<li>Inform systemd of the unit file change <code>systemctl daemon-reload</code></li>
<li>Enable the new service <code>systemctl enable fabmo</code></li>
<li>Start the new service immediately <code>systemctl start fabmo</code></li>
<li>After the engine has had time to start, check its status: <code>systemctl status fabmo</code></li>
</ol>
<h3 id="on-the-raspberry-pi-3">On the Raspberry Pi 3</h3>
<p><img src="/doc/raspi.png" alt="Raspberry Pi"></p>
<p>To install the engine in the &quot;standard&quot; location on the Raspberry Pi 3, perform the following steps.</p>
<ol>
<li>Checkout the source into <code>/fabmo</code> with <code>git clone https://github.com/FabMo/FabMo-Engine /fabmo</code></li>
<li>Checkout the appropriate branch of the source tree.  The <code>release</code> branch is the most recent stable release.  (<code>git checkout release</code>)</li>
<li>Install dependencies using npm: <code>cd /fabmo; npm install</code></li>
<li>Run the engine using the instructions below</li>
</ol>
<h3 id="on-mac-os-x">On Mac OS X</h3>
<p><img src="/doc/apple_logo.gif" alt="Apple Logo"></p>
<p>To install the engine in the standard location on a Mac, follow the steps below.  This method is used by the FabMo team for development in the OSX environment.</p>
<ol>
<li>Install Node.js - You&#39;ll need an older version: 0.12.7 to be compatible with FabMo.  To install an older version through homebrew (homebrew is highly recommended) do this: <a href="http://apple.stackexchange.com/a/207883/67692">http://apple.stackexchange.com/a/207883/67692</a></li>
<li>Install npm - you can also do this with homebrew</li>
<li>Create the fabmo directory: <code>mkdir -p /fabmo</code></li>
<li>Create the fabmo data directory: <code>mkdir -p /opt/fabmo</code></li>
<li>Clone the engine source <code>/fabmo/engine</code> with <code>git clone https://github.com/FabMo/FabMo-Engine /fabmo/engine</code></li>
<li>Checkout the appropriate branch of the source tree.  The <code>release</code> branch is the most recent stable release.  (<code>git checkout release</code> from the <code>/fabmo/engine</code> directory)</li>
<li>Install dependencies using npm: <code>cd /fabmo/engine; npm install</code></li>
<li>Run the engine using the instructions below.  Make sure that the G2 motion control board is connected the first time you run the engine.  The engine auto-detects the USB port and saves this setting on first run, and if the motion controller is absent, it won&#39;t be properly detected.  If you need to change ports later on, the port settings are located in <code>/opt/fabmo/config/engine.json</code></li>
</ol>
<h2 id="running-the-engine">Running the Engine</h2>
<p>For debugging the engine, you can run it directly from the command prompt with <code>npm start</code> or <code>node server.js</code>  Running with <code>npm run debug</code> puts the engine in debug mode, in which it does more agressive app reloading.  (This is recommended for app development, particularly for system apps)  <code>npm debug slow</code> introduces deliberate network latency on GET/POST requests, for testing.  This latency can be adjusted in <code>engine.js</code></p>
<h2 id="development-automation">Development Automation</h2>
<p>A number of grunt tasks have been set up to facilitate engine development.  To see them, run <code>grunt</code> with no arguments in the source directory, and a list will be produced with explanations.</p></div></div></div></div></body></html>